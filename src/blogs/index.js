gsap.registerPlugin(ScrollTrigger,ScrollSmoother,SplitText,TextPlugin),"ontouchstart"in window||(Smoother=ScrollSmoother.create({wrapper:"#smooth-wrapper",content:"#smooth-content",smooth:.8,effects:!0,smoothTouch:!1})),window.addEventListener("load",(e=>{gsap.to(".hero h1",{scrollTrigger:{trigger:".hero",start:"top top",end:"bottom top",scrub:!0},top:"40%"});const t=document.querySelector(".section2");let o=null,r=null,n=!1;if(t){const e=t.querySelector("header");e&&(o=gsap.to(".section2",{scrollTrigger:{trigger:".section2",start:"top top",end:"bottom top",pin:".section2 header",pinSpacing:!1,onEnter:()=>{e.style.borderBottomWidth="0.1vmin"},onLeaveBack:()=>{e.style.borderBottomWidth="0"}}}))}function s(){if(n)return;if(!t)return;if(window.innerWidth<1500)return;const e=t.querySelector(".blogCoverImgContainer"),o=e?e.querySelector("img"):null;e&&o&&(r=gsap.to(".section2 .blogCoverImgContainer",{scrollTrigger:{trigger:".section2",start:"top top",end:"bottom top",pin:".section2 .blogCoverImgContainer > img",pinSpacing:!1}})),n=!0}s();let i=null;window.addEventListener("resize",(()=>{clearTimeout(i),i=setTimeout((()=>{if(window.innerWidth>=1500){s();try{ScrollTrigger.refresh()}catch(e){}}else{!function(){if(r){try{r.scrollTrigger&&r.scrollTrigger.kill(),r.kill()}catch(e){}r=null}n=!1}();try{ScrollTrigger.refresh()}catch(e){}}}),150)}));const a=document.querySelector(".splashScreen svg path");a.setAttribute("d","M3 252.473C7 236.473 36.2346 186.5 41 179C44.3333 142 80.9 58.4725 198.5 16.4725C222.333 6.30583 282.5 -7.9275 332.5 16.4725C319.167 31.3059 293 71 283.5 83.9727C274 96.9453 245 132.473 183 132.473C150.667 129.982 72.6582 138.3 39.4582 181.5C39.4582 181.5 91.5 54.5 265.5 33");var l=a.getTotalLength();let c,d;gsap.set(a,{strokeDasharray:l,strokeDashoffset:l}),gsap.to(a,{strokeDashoffset:0,duration:2,ease:"ease-in-out"}),gsap.timeline({paused:!0,reversed:!0}).from(new SplitText(".splashScreen p:nth-child(1)",{type:"chars",tagName:"span",tag:"span"}).chars,{opacity:.2,ease:"power3.out",stagger:.3}).to(".splashScreen",{y:"-100%",delay:.5,duration:1,ease:"power3.in"}).play(),c=document.createElement("div"),d=document.createElement("div"),c.classList.add("cursor"),d.classList.add("cursorBorder"),document.body.appendChild(c),document.body.appendChild(d);const p={x:0,y:0},u={x:0,y:0};document.addEventListener("mousemove",(e=>{p.x=e.clientX,p.y=e.clientY,c.style.transform=`translate(${e.clientX}px, ${e.clientY}px)`}));function y(){"ontouchstart"in window||document.querySelectorAll("[data-cursor]").forEach((e=>{e.addEventListener("mouseover",(t=>{switch(e.dataset.cursor){case"pointerWhite":d.style.boxShadow="0 0 0 0.1vmin white",c.style.backgroundColor="white";break;case"pointerDisable":d.style.display="none",c.style.display="none";break;case"pointerBlendMode":d.style.backgroundColor="white",d.style.mixBlendMode="difference",d.style.setProperty("--size","10vmin");break;case"pointerFocus":c.style.backgroundColor="black",d.style.borderRadius="0",d.style.setProperty("--size","4vmin"),d.style.backgroundColor="white",d.style.mixBlendMode="difference";break;case"pointerLink":c.style.display="none",d.style.setProperty("--size","10vmin"),d.style.backgroundColor="#f2ecdc ",d.style.backgroundImage="url(../../assets/VectorFlesh4.svg)",d.style.backgroundSize="3vmin 3vmin",d.style.boxShadow="0 0 0 0.1vmin black";break;case"pointerLinkNavbar":c.style.display="none",d.style.setProperty("--size","10vmin"),d.style.backgroundColor="#ffffff30",d.style.backdropFilter="blur(0.8vmin)",d.style.backgroundImage="url(../../assets/VectorFlesh4.svg)",d.style.backgroundSize="3vmin 3vmin",d.style.boxShadow="0 0 0 0.1vmin black";break;case"pointerWaveBorder":d.style.display="none",c.style.setProperty("--sizeMainCursor","30vmin"),c.style.background="linear-gradient(120deg, #ffffff, #000000, #ffffff, #000000, #ffffff)",c.style.backgroundSize=" 1600% 1600%",c.style.animation="blobRadius 5s ease infinite, blobBackground 15s ease infinite",c.style.mixBlendMode="difference";break;case"pointerClickable":d.style.borderRadius="0",d.style.boxShadow="0 0 0 0.1vmin black",d.style.setProperty("--size","3vmin")}})),e.addEventListener("mouseout",(e=>{d.style.backgroundImage="unset",d.style.backgroundColor="unset",c.style.background="unset",d.style.mixBlendMode="unset",d.style.setProperty("--size","0vmin"),c.style.setProperty("--sizeMainCursor","0"),c.style.animation="unset",d.style.animation="unset",c.style.display="inline",d.style.display="inline",d.style.borderRadius="50%",d.style.boxShadow="unset",c.style.backgroundColor="black",c.style.mixBlendMode="unset",d.style.filter="unset",d.style.backdropFilter="unset",d.style.backgroundColor="transparent",c.style.width="var(--sizeMainCursor)",c.style.borderRadius="50%"}))}))}requestAnimationFrame((function e(){u.x+=(p.x-u.x)/8,u.y+=(p.y-u.y)/8,d.style.transform=`translate(${u.x}px, ${u.y}px) rotate(45deg)`,requestAnimationFrame(e)})),document.addEventListener("click",(function(){d.style.borderRadius="0",d.style.setProperty("--size","2vmin"),setTimeout((function(){requestAnimationFrame((function(){d.style.borderRadius="50%",d.style.setProperty("--size","5vmin")}))}),150)})),"ontouchstart"in window&&(d.style.display="none",c.style.display="none"),y();let g=gsap.utils.toArray(".section5 .infiniteScrollText div").map(((e,t)=>{const o=e.querySelectorAll(".section5  .infiniteScrollText div span");return function(e,t){e=gsap.utils.toArray(e),t=t||{};let o,r,n,s,i,a,l=gsap.timeline({repeat:t.repeat,paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>l.totalTime(l.rawTime()+100*l.duration())}),c=e.length,d=e[0].offsetLeft,p=[],u=[],y=[],g=0,m=100*(t.speed||1),f=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1);for(gsap.set(e,{xPercent:(e,t)=>{let o=u[e]=parseFloat(gsap.getProperty(t,"width","px"));return y[e]=f(parseFloat(gsap.getProperty(t,"x","px"))/o*100+gsap.getProperty(t,"xPercent")),y[e]}}),gsap.set(e,{x:0}),o=e[c-1].offsetLeft+y[c-1]/100*u[c-1]-d+e[c-1].offsetWidth*gsap.getProperty(e[c-1],"scaleX")+(parseFloat(t.paddingRight)||0),a=0;a<c;a++)i=e[a],r=y[a]/100*u[a],n=i.offsetLeft+r-d,s=n+u[a]*gsap.getProperty(i,"scaleX"),l.to(i,{xPercent:f((r-s)/u[a]*100),duration:s/m},0).fromTo(i,{xPercent:f((r-s+o)/u[a]*100)},{xPercent:y[a],duration:(r-s+o-r)/m,immediateRender:!1},s/m).add("label"+a,n/m),p[a]=n/m;function h(e,t){t=t||{},Math.abs(e-g)>c/2&&(e+=e>g?-c:c);let o=gsap.utils.wrap(0,c,e),r=p[o];return r>l.time()!=e>g&&(t.modifiers={time:gsap.utils.wrap(0,l.duration())},r+=l.duration()*(e>g?1:-1)),g=o,t.overwrite=!0,l.tweenTo(r,t)}l.next=e=>h(g+1,e),l.previous=e=>h(g-1,e),l.current=()=>g,l.toIndex=(e,t)=>h(e,t),l.times=p,t.reversed&&(l.vars.onReverseComplete(),l.reverse());return l}(o,{repeat:-1,speed:1+.5*t,reversed:!1,paddingRight:parseFloat(gsap.getProperty(o[0],"marginRight","px"))})})),m=0,f=1;window.addEventListener("scroll",(()=>{let e=window.pageYOffset>m?1:-1;e!==f&&(g.forEach((t=>{gsap.to(t,{timeScale:e,overwrite:!0})})),f=e),m=window.pageYOffset}));const h=document.querySelector(".cardsContainer"),b=document.querySelector(".section5 > div:last-child a:first-child");let v=[];const x=new Date,w=`${x.getFullYear()}${(x.getMonth()+1).toString().padStart(2,"0")}${x.getDate().toString().padStart(2,"0")}`;fetch(`../serverAssets/blogs.json?version=${w}`).then((e=>e.json())).then((e=>{v=e.blogs;(function(e){for(let t=e.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e})(v).slice(0,3).forEach((e=>{const t=document.createElement("div");t.innerHTML=`\n        <a href="${e.url}" data-cursor="pointerLinkNavbar">\n          <div>\n            <p>${e.category}</p>\n            <p>${e.date}</p>\n          </div>\n          <img src="../serverAssets/blogsCoverImg/${e.image}" alt="" />\n          <h6>${e.title}</h6>\n          <p>${e.description}</p>\n        </a>\n      `,h.appendChild(t)})),y()})).catch((e=>console.error("Error fetching data:",e))),b.addEventListener("click",(function(){if(0===v.length)return;const e=Math.floor(Math.random()*v.length),t=v[e];window.location.href=t.url})),document.querySelectorAll(".mouseSticky").forEach((function(e){e.addEventListener("mousemove",(function(t){!function(e,t,o=.8){var r=window.pageYOffset||document.documentElement.scrollTop,n=t.getBoundingClientRect(),s=Math.abs(n.width-n.height)/2,i=e.pageX-n.left-s,a=e.pageY-n.top;gsap.to(t,{x:(i-n.width/6)*o,y:(a-n.height/2-r)*o,ease:"power1",duration:.6})}(t,e)})),e.addEventListener("mouseleave",(function(t){gsap.to(e,{scale:1,x:0,y:0,ease:"power3",duration:.6})}))}));const k=document.querySelector(".changeTheme");function S(e){const t=document.documentElement,o=document.querySelector(".changeTheme img");"light"===e?(t.style.setProperty("--background-color","#f2ecdc"),t.style.setProperty("--black","black"),t.style.setProperty("--black-70percent","#1d1d1d"),t.style.setProperty("--black-hover","#00000020"),t.style.setProperty("--white","white"),t.style.setProperty("--white-90percent","#f2f2f2"),t.style.setProperty("--white-70percent","#d9d9d9"),t.style.setProperty("--white-10percent","#ffffff1a"),t.style.setProperty("--section5-background-first","#ffab2e"),t.style.setProperty("--section5-background-second","#ff9a03"),t.style.setProperty("--section5-card-first","#ffcb6d"),t.style.setProperty("--section5-card-second","#363029de"),t.style.setProperty("--invert-icon-color","none"),t.style.setProperty("--invert-icon-color2","none"),t.style.setProperty("--invert-icon-color3","invert(99%) sepia(0%) saturate(0%) hue-rotate(141deg) brightness(109%) contrast(101%)"),o.src="../assets/VectorNight.svg"):"dark"===e&&(t.style.setProperty("--background-color","#0f0f0f"),t.style.setProperty("--black","#e7e7e7"),t.style.setProperty("--black-70percent","#dbdbdb"),t.style.setProperty("--black-hover","#ffffff20"),t.style.setProperty("--white","black"),t.style.setProperty("--white-90percent","#2e2e2e"),t.style.setProperty("--white-70percent","#141414"),t.style.setProperty("--white-10percent","#ffffff1a"),t.style.setProperty("--section5-background-first","#161512"),t.style.setProperty("--section5-background-second","#241f14"),t.style.setProperty("--section5-card-first","#696969"),t.style.setProperty("--section5-card-second","#ff1f1fde"),t.style.setProperty("--invert-icon-color","invert(48%) brightness(1000%)"),t.style.setProperty("--invert-icon-color2","invert(99%) sepia(0%) saturate(0%) hue-rotate(338deg) brightness(113%) contrast(100%)"),t.style.setProperty("--invert-icon-color3","none"),o.src="../assets/VectorDay.svg"),localStorage.setItem("theme",e)}function P(e){document.querySelector(e).addEventListener("click",(function(t){t.preventDefault();const o=document.querySelector(`${e} p`),r=o.textContent,n=this.getAttribute("href");if(function(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}())window.location.href=n;else{const e=n.replace("tel:","");navigator.clipboard.writeText(e).then((function(){o.textContent="کپی شد.",setTimeout((()=>{o.textContent=r}),3e3)}))}}))}S(localStorage.getItem("theme")||"light"),k.addEventListener("click",(()=>{S("light"===localStorage.getItem("theme")?"dark":"light")})),document.querySelector(".copyButton").addEventListener("click",(()=>{const e=document.querySelector(".copyButton p"),t=e.textContent,o=window.location.href;if(navigator.clipboard)navigator.clipboard.writeText(o).then((()=>{e.textContent="کپی شد.",setTimeout((()=>e.textContent=t),3e3)})).catch((e=>console.error("Failed to copy: ",e)));else{const r=document.createElement("textarea");r.value=o,document.body.appendChild(r),r.select();try{document.execCommand("copy"),e.textContent="کپی شد.",setTimeout((()=>e.textContent=t),3e3)}catch(e){console.error("Failed to copy: ",e)}document.body.removeChild(r)}})),P(".settings > div:last-child a:nth-child(3)"),P(".settings > div:last-child a:nth-child(4)"),P(".settings > div:last-child a:nth-child(5)");var C,L=document.querySelector(".settings > div:nth-child(3)"),z=document.querySelector(".settings > div:nth-child(4)");const E=()=>{clearTimeout(C),z.style.marginLeft="0"},T=()=>{C=setTimeout((()=>{z.style.marginLeft="-100%"}),1500)};L.addEventListener("mouseover",E),z.addEventListener("mouseover",E),L.addEventListener("mouseout",T),z.addEventListener("mouseout",T),document.addEventListener("click",(e=>{L.contains(e.target)||z.contains(e.target)||(z.style.marginLeft="-100%")}))}));const emailRegex=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,registerButton=document.querySelector(".section4 > p:nth-child(6)");function validateEmailInput(e){const t=e.value,o=document.querySelector("#emailFeedback");registerButton.style.right="65%",registerButton.style.top="50%",emailRegex.test(t)?(e.style.color="#70cd5d",o.textContent=""):(e.style.color="#c6383d",o.textContent="“فرمت ایمیل درست نیست!”",o.classList.remove("animate"),o.offsetWidth,o.classList.add("animate"))}let processOnlyOnce=!1;function processEmailInput(){if(!0===processOnlyOnce)return;const e=document.querySelector("#email").value;if(registerButton.style.right="65%",registerButton.style.top="50%",emailRegex.test(e)){var t=new FormData;t.append("email",e);var o=new XMLHttpRequest;o.open("POST","../src/php/processEmail.php",!0),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?(registerButton.style.backgroundColor="#5dba82",registerButton.textContent="ثبت شد!",processOnlyOnce=!0):(registerButton.style.backgroundColor="#c44141",registerButton.textContent="ثبت نشد، دوباره تلاش کنید!",console.error("Error adding document: ",o.status)))},o.send(t)}else registerButton.style.backgroundColor="#c44141",registerButton.textContent="ایمیل را اصلاح کنید!"}