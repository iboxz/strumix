gsap.registerPlugin(ScrollTrigger,ScrollSmoother,SplitText,TextPlugin),"ontouchstart"in window||(Smoother=ScrollSmoother.create({wrapper:"#smooth-wrapper",content:"#smooth-content",smooth:.8,effects:!0,smoothTouch:!1})),window.addEventListener("load",e=>{gsap.to(".hero h1",{scrollTrigger:{trigger:".hero",start:"top top",end:"bottom top",scrub:!0},top:"40%"}),document.querySelector(".section2"),gsap.to(".section2",{scrollTrigger:{trigger:".section2",start:"top top",end:"bottom top",pin:".section2 header",pinSpacing:!1,onEnter(){document.querySelector(".section2 header").style.borderBottomWidth="0.1vmin"},onLeaveBack(){document.querySelector(".section2 header").style.borderBottomWidth="0"}}});let t=document.querySelector(".splashScreen svg path");var r,o="M3 252.473C7 236.473 36.2346 186.5 41 179C44.3333 142 80.9 58.4725 198.5 16.4725C222.333 6.30583 282.5 -7.9275 332.5 16.4725C319.167 31.3059 293 71 283.5 83.9727C274 96.9453 245 132.473 183 132.473C150.667 129.982 72.6582 138.3 39.4582 181.5C39.4582 181.5 91.5 54.5 265.5 33";t.setAttribute("d",o);var s,n=t.getTotalLength();gsap.set(t,{strokeDasharray:n,strokeDashoffset:n}),gsap.to(t,{strokeDashoffset:0,duration:2,ease:"ease-in-out"}),gsap.timeline({paused:!0,reversed:!0}).from(new SplitText(".splashScreen p:nth-child(1)",{type:"chars",tagName:"span",tag:"span"}).chars,{opacity:.2,ease:"power3.out",stagger:.3}).to(".splashScreen",{y:"-100%",delay:.5,duration:1,ease:"power3.in"}).play();let i,a;i=document.createElement("div"),a=document.createElement("div"),i.classList.add("cursor"),a.classList.add("cursorBorder"),document.body.appendChild(i),document.body.appendChild(a);let l={x:0,y:0},c={x:0,y:0};document.addEventListener("mousemove",e=>{l.x=e.clientX,l.y=e.clientY,i.style.transform=`translate(${e.clientX}px, ${e.clientY}px)`});function d(){c.x+=(l.x-c.x)/8,c.y+=(l.y-c.y)/8,a.style.transform=`translate(${c.x}px, ${c.y}px) rotate(45deg)`,requestAnimationFrame(d)}function $(){"ontouchstart"in window||document.querySelectorAll("[data-cursor]").forEach(e=>{e.addEventListener("mouseover",t=>{switch(e.dataset.cursor){case"pointerWhite":a.style.boxShadow="0 0 0 0.1vmin white",i.style.backgroundColor="white";break;case"pointerDisable":a.style.display="none",i.style.display="none";break;case"pointerBlendMode":a.style.backgroundColor="white",a.style.mixBlendMode="difference",a.style.setProperty("--size","10vmin");break;case"pointerFocus":i.style.backgroundColor="black",a.style.borderRadius="0",a.style.setProperty("--size","4vmin"),a.style.backgroundColor="white",a.style.mixBlendMode="difference";break;case"pointerLink":i.style.display="none",a.style.setProperty("--size","10vmin"),a.style.backgroundColor="#f2ecdc ",a.style.backgroundImage="url(../../assets/VectorFlesh4.svg)",a.style.backgroundSize="3vmin 3vmin",a.style.boxShadow="0 0 0 0.1vmin black";break;case"pointerLinkNavbar":i.style.display="none",a.style.setProperty("--size","10vmin"),a.style.backgroundColor="#ffffff30",a.style.backdropFilter="blur(0.8vmin)",a.style.backgroundImage="url(../../assets/VectorFlesh4.svg)",a.style.backgroundSize="3vmin 3vmin",a.style.boxShadow="0 0 0 0.1vmin black";break;case"pointerWaveBorder":a.style.display="none",i.style.setProperty("--sizeMainCursor","30vmin"),i.style.background="linear-gradient(120deg, #ffffff, #000000, #ffffff, #000000, #ffffff)",i.style.backgroundSize=" 1600% 1600%",i.style.animation="blobRadius 5s ease infinite, blobBackground 15s ease infinite",i.style.mixBlendMode="difference";break;case"pointerClickable":a.style.borderRadius="0",a.style.boxShadow="0 0 0 0.1vmin black",a.style.setProperty("--size","3vmin")}}),e.addEventListener("mouseout",e=>{a.style.backgroundImage="unset",a.style.backgroundColor="unset",i.style.background="unset",a.style.mixBlendMode="unset",a.style.setProperty("--size","0vmin"),i.style.setProperty("--sizeMainCursor","0"),i.style.animation="unset",a.style.animation="unset",i.style.display="inline",a.style.display="inline",a.style.borderRadius="50%",a.style.boxShadow="unset",i.style.backgroundColor="black",i.style.mixBlendMode="unset",a.style.filter="unset",a.style.backdropFilter="unset",a.style.backgroundColor="transparent",i.style.width="var(--sizeMainCursor)",i.style.borderRadius="50%"})})}requestAnimationFrame(d),document.addEventListener("click",function(){a.style.borderRadius="0",a.style.setProperty("--size","2vmin"),setTimeout(function(){requestAnimationFrame(function(){a.style.borderRadius="50%",a.style.setProperty("--size","5vmin")})},150)}),"ontouchstart"in window&&(a.style.display="none",i.style.display="none"),$();let p=gsap.utils.toArray(".section5 .infiniteScrollText div").map((e,t)=>{let r=e.querySelectorAll(".section5  .infiniteScrollText div span");return m(r,{repeat:-1,speed:1+.5*t,reversed:!1,paddingRight:parseFloat(gsap.getProperty(r[0],"marginRight","px"))})}),y=0,u=1;function m(e,t){e=gsap.utils.toArray(e),t=t||{};let r=gsap.timeline({repeat:t.repeat,paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>r.totalTime(r.rawTime()+100*r.duration())}),o=e.length,s=e[0].offsetLeft,n=[],i=[],a=[],l=0,c=100*(t.speed||1),d=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1),$,p,y,u,m,f;for(gsap.set(e,{xPercent(e,t){let r=i[e]=parseFloat(gsap.getProperty(t,"width","px"));return a[e]=d(parseFloat(gsap.getProperty(t,"x","px"))/r*100+gsap.getProperty(t,"xPercent")),a[e]}}),gsap.set(e,{x:0}),$=e[o-1].offsetLeft+a[o-1]/100*i[o-1]-s+e[o-1].offsetWidth*gsap.getProperty(e[o-1],"scaleX")+(parseFloat(t.paddingRight)||0),f=0;f<o;f++)m=e[f],p=a[f]/100*i[f],u=(y=m.offsetLeft+p-s)+i[f]*gsap.getProperty(m,"scaleX"),r.to(m,{xPercent:d((p-u)/i[f]*100),duration:u/c},0).fromTo(m,{xPercent:d((p-u+$)/i[f]*100)},{xPercent:a[f],duration:(p-u+$-p)/c,immediateRender:!1},u/c).add("label"+f,y/c),n[f]=y/c;function g(e,t){t=t||{},Math.abs(e-l)>o/2&&(e+=e>l?-o:o);let s=gsap.utils.wrap(0,o,e),i=n[s];return i>r.time()!=e>l&&(t.modifiers={time:gsap.utils.wrap(0,r.duration())},i+=r.duration()*(e>l?1:-1)),l=s,t.overwrite=!0,r.tweenTo(i,t)}return r.next=e=>g(l+1,e),r.previous=e=>g(l-1,e),r.current=()=>l,r.toIndex=(e,t)=>g(e,t),r.times=n,t.reversed&&(r.vars.onReverseComplete(),r.reverse()),r}window.addEventListener("scroll",()=>{let e=window.pageYOffset>y?1:-1;e!==u&&(p.forEach(t=>{gsap.to(t,{timeScale:e,overwrite:!0})}),u=e),y=window.pageYOffset});let f=document.querySelector(".cardsContainer"),g=document.querySelector(".section5 > div:last-child a:first-child"),h=[],_=new Date,b=`${_.getFullYear()}${(_.getMonth()+1).toString().padStart(2,"0")}${_.getDate().toString().padStart(2,"0")}`;function v(){if(0===h.length)return;let e=Math.floor(Math.random()*h.length),t=h[e];window.location.href=t.url}fetch(`../serverAssets/blogs.json?version=${b}`).then(e=>e.json()).then(e=>{function t(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}h=e.blogs;let r=t(h),o=r.slice(0,3);o.forEach(e=>{let t=document.createElement("div");t.innerHTML=`
        <a href="${e.url}" data-cursor="pointerLinkNavbar">
          <div>
            <p>${e.category}</p>
            <p>${e.date}</p>
          </div>
          <img src="../serverAssets/blogsCoverImg/${e.image}" alt="" />
          <h6>${e.title}</h6>
          <p>${e.description}</p>
        </a>
      `,f.appendChild(t)}),$()}).catch(e=>console.error("Error fetching data:",e)),g.addEventListener("click",v);var x=document.querySelectorAll(".mouseSticky");function k(e,t,r=.8){var o=window.pageYOffset||document.documentElement.scrollTop,s=t.getBoundingClientRect(),n=Math.abs(s.width-s.height)/2,i=e.pageX-s.left-n,a=e.pageY-s.top;gsap.to(t,{x:(i-s.width/6)*r,y:(a-s.height/2-o)*r,ease:"power1",duration:.6})}x.forEach(function(e){e.addEventListener("mousemove",function(t){k(t,e)}),e.addEventListener("mouseleave",function(t){gsap.to(e,{scale:1,x:0,y:0,ease:"power3",duration:.6})})});let w=document.querySelector(".changeTheme"),P=localStorage.getItem("theme")||"light";function C(e){let t=document.documentElement,r=document.querySelector(".changeTheme img");"light"===e?(t.style.setProperty("--background-color","#f2ecdc"),t.style.setProperty("--black","black"),t.style.setProperty("--black-70percent","#1d1d1d"),t.style.setProperty("--black-hover","#00000020"),t.style.setProperty("--white","white"),t.style.setProperty("--white-90percent","#f2f2f2"),t.style.setProperty("--white-70percent","#d9d9d9"),t.style.setProperty("--white-10percent","#ffffff1a"),t.style.setProperty("--section5-background-first","#ffab2e"),t.style.setProperty("--section5-background-second","#ff9a03"),t.style.setProperty("--section5-card-first","#ffcb6d"),t.style.setProperty("--section5-card-second","#363029de"),t.style.setProperty("--invert-icon-color","none"),t.style.setProperty("--invert-icon-color2","none"),t.style.setProperty("--invert-icon-color3","invert(99%) sepia(0%) saturate(0%) hue-rotate(141deg) brightness(109%) contrast(101%)"),r.src="../assets/VectorNight.svg"):"dark"===e&&(t.style.setProperty("--background-color","#0f0f0f"),t.style.setProperty("--black","#e7e7e7"),t.style.setProperty("--black-70percent","#dbdbdb"),t.style.setProperty("--black-hover","#ffffff20"),t.style.setProperty("--white","black"),t.style.setProperty("--white-90percent","#2e2e2e"),t.style.setProperty("--white-70percent","#141414"),t.style.setProperty("--white-10percent","#ffffff1a"),t.style.setProperty("--section5-background-first","#161512"),t.style.setProperty("--section5-background-second","#241f14"),t.style.setProperty("--section5-card-first","#696969"),t.style.setProperty("--section5-card-second","#ff1f1fde"),t.style.setProperty("--invert-icon-color","invert(48%) brightness(1000%)"),t.style.setProperty("--invert-icon-color2","invert(99%) sepia(0%) saturate(0%) hue-rotate(338deg) brightness(113%) contrast(100%)"),t.style.setProperty("--invert-icon-color3","none"),r.src="../assets/VectorDay.svg"),localStorage.setItem("theme",e)}function S(){var e;let t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function z(e){document.querySelector(e).addEventListener("click",function(t){t.preventDefault();let r=document.querySelector(`${e} p`),o=r.textContent,s=this.getAttribute("href");if(S())window.location.href=s;else{let n=s.replace("tel:","");navigator.clipboard.writeText(n).then(function(){r.textContent="کپی شد.",setTimeout(()=>{r.textContent=o},3e3)})}})}C(P),w.addEventListener("click",()=>{let e=localStorage.getItem("theme"),t="light"===e?"dark":"light";C(t)}),document.querySelector(".copyButton").addEventListener("click",()=>{let e=document.querySelector(".copyButton p"),t=e.textContent,r=window.location.href;if(navigator.clipboard)navigator.clipboard.writeText(r).then(()=>{e.textContent="کپی شد.",setTimeout(()=>e.textContent=t,3e3)}).catch(e=>console.error("Failed to copy: ",e));else{let o=document.createElement("textarea");o.value=r,document.body.appendChild(o),o.select();try{document.execCommand("copy"),e.textContent="کپی شد.",setTimeout(()=>e.textContent=t,3e3)}catch(s){console.error("Failed to copy: ",s)}document.body.removeChild(o)}}),z(".settings > div:last-child a:nth-child(3)"),z(".settings > div:last-child a:nth-child(4)"),z(".settings > div:last-child a:nth-child(5)");var E=document.querySelector(".settings > div:nth-child(3)"),L=document.querySelector(".settings > div:nth-child(4)");let B=()=>{clearTimeout(r),L.style.marginLeft="0"},q=()=>{r=setTimeout(()=>{L.style.marginLeft="-100%"},1500)};E.addEventListener("mouseover",B),L.addEventListener("mouseover",B),E.addEventListener("mouseout",q),L.addEventListener("mouseout",q),document.addEventListener("click",e=>{E.contains(e.target)||L.contains(e.target)||(L.style.marginLeft="-100%")})});const emailRegex=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,registerButton=document.querySelector(".section4 > p:nth-child(6)");function validateEmailInput(e){let t=e.value,r=document.querySelector("#emailFeedback");registerButton.style.right="65%",registerButton.style.top="50%",emailRegex.test(t)?(e.style.color="#70cd5d",r.textContent=""):(e.style.color="#c6383d",r.textContent="“فرمت ایمیل درست نیست!”",r.classList.remove("animate"),r.offsetWidth,r.classList.add("animate"))}let processOnlyOnce=!1;function processEmailInput(){if(!0===processOnlyOnce)return;let e=document.querySelector("#email"),t=e.value;if(registerButton.style.right="65%",registerButton.style.top="50%",emailRegex.test(t)){var r=new FormData;r.append("email",t);var o=new XMLHttpRequest;o.open("POST","../src/php/processEmail.php",!0),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?(registerButton.style.backgroundColor="#5dba82",registerButton.textContent="ثبت شد!",processOnlyOnce=!0):(registerButton.style.backgroundColor="#c44141",registerButton.textContent="ثبت نشد، دوباره تلاش کنید!",console.error("Error adding document: ",o.status)))},o.send(r)}else registerButton.style.backgroundColor="#c44141",registerButton.textContent="ایمیل را اصلاح کنید!"}