function isMobileDevice(){var e;let t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function setupAnimations(){isMobileDevice()||gsap.to(".section2",{scrollTrigger:{trigger:".section2",start:"top top",end:"bottom top",pin:".section2 header",pinSpacing:!1,onEnter(){window.innerWidth>768&&(document.querySelector(".section2 header").style.borderBottomWidth="0.1vmin")},onLeaveBack(){document.querySelector(".section2 header").style.borderBottomWidth="0"}}}),gsap.to(".hero h1",{scrollTrigger:{trigger:".hero",start:"top top",end:"bottom top",scrub:!0},top:"-20%"}),window.innerWidth>992&&gsap.to(".section2",{scrollTrigger:{trigger:".section2",start:"top top",end:"bottom bottom",pin:".section2 .categorySelector",pinSpacing:!1}})}gsap.registerPlugin(ScrollTrigger,ScrollSmoother,SplitText,TextPlugin),"ontouchstart"in window||(Smoother=ScrollSmoother.create({wrapper:"#smooth-wrapper",content:"#smooth-content",smooth:.8,effects:!0,smoothTouch:!1}));let focusedElement=null;function resetAnimations(){focusedElement=document.activeElement,ScrollTrigger.getAll().forEach(e=>e.kill()),setupAnimations(),setTimeout(()=>{focusedElement&&"INPUT"===focusedElement.tagName&&focusedElement.focus()},100)}setupAnimations(),window.addEventListener("resize",()=>{resetAnimations()}),window.addEventListener("load",e=>{let t=document.querySelector(".splashScreen svg path");var r="M3 252.473C7 236.473 36.2346 186.5 41 179C44.3333 142 80.9 58.4725 198.5 16.4725C222.333 6.30583 282.5 -7.9275 332.5 16.4725C319.167 31.3059 293 71 283.5 83.9727C274 96.9453 245 132.473 183 132.473C150.667 129.982 72.6582 138.3 39.4582 181.5C39.4582 181.5 91.5 54.5 265.5 33";t.setAttribute("d",r);var o,s=t.getTotalLength();gsap.set(t,{strokeDasharray:s,strokeDashoffset:s}),gsap.to(t,{strokeDashoffset:0,duration:2,ease:"ease-in-out"}),gsap.timeline({paused:!0,reversed:!0}).from(new SplitText(".splashScreen p:nth-child(1)",{type:"chars",tagName:"span",tag:"span"}).chars,{opacity:.2,ease:"power3.out",stagger:.3}).to(".splashScreen",{y:"-100%",delay:.5,duration:1,ease:"power3.in"}).play(),activateCustomCursors();let n=gsap.utils.toArray(".section5 .infiniteScrollText div").map((e,t)=>{let r=e.querySelectorAll(".section5  .infiniteScrollText div span");return c(r,{repeat:-1,speed:1+.5*t,reversed:!1,paddingRight:parseFloat(gsap.getProperty(r[0],"marginRight","px"))})}),i=0,a=1;function c(e,t){e=gsap.utils.toArray(e),t=t||{};let r=gsap.timeline({repeat:t.repeat,paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>r.totalTime(r.rawTime()+100*r.duration())}),o=e.length,s=e[0].offsetLeft,n=[],i=[],a=[],c=0,l=100*(t.speed||1),d=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1),u,p,$,y,g,m;for(gsap.set(e,{xPercent(e,t){let r=i[e]=parseFloat(gsap.getProperty(t,"width","px"));return a[e]=d(parseFloat(gsap.getProperty(t,"x","px"))/r*100+gsap.getProperty(t,"xPercent")),a[e]}}),gsap.set(e,{x:0}),u=e[o-1].offsetLeft+a[o-1]/100*i[o-1]-s+e[o-1].offsetWidth*gsap.getProperty(e[o-1],"scaleX")+(parseFloat(t.paddingRight)||0),m=0;m<o;m++)g=e[m],p=a[m]/100*i[m],y=($=g.offsetLeft+p-s)+i[m]*gsap.getProperty(g,"scaleX"),r.to(g,{xPercent:d((p-y)/i[m]*100),duration:y/l},0).fromTo(g,{xPercent:d((p-y+u)/i[m]*100)},{xPercent:a[m],duration:(p-y+u-p)/l,immediateRender:!1},y/l).add("label"+m,$/l),n[m]=$/l;function f(e,t){t=t||{},Math.abs(e-c)>o/2&&(e+=e>c?-o:o);let s=gsap.utils.wrap(0,o,e),i=n[s];return i>r.time()!=e>c&&(t.modifiers={time:gsap.utils.wrap(0,r.duration())},i+=r.duration()*(e>c?1:-1)),c=s,t.overwrite=!0,r.tweenTo(i,t)}return r.next=e=>f(c+1,e),r.previous=e=>f(c-1,e),r.current=()=>c,r.toIndex=(e,t)=>f(e,t),r.times=n,t.reversed&&(r.vars.onReverseComplete(),r.reverse()),r}window.addEventListener("scroll",()=>{let e=window.pageYOffset>i?1:-1;e!==a&&(n.forEach(t=>{gsap.to(t,{timeScale:e,overwrite:!0})}),a=e),i=window.pageYOffset});var l=document.querySelectorAll(".mouseSticky");function d(e,t,r=.8){var o=window.pageYOffset||document.documentElement.scrollTop,s=t.getBoundingClientRect(),n=Math.abs(s.width-s.height)/2,i=e.pageX-s.left-n,a=e.pageY-s.top;gsap.to(t,{x:(i-s.width/6)*r,y:(a-s.height/2-o)*r,ease:"power1",duration:.6})}l.forEach(function(e){e.addEventListener("mousemove",function(t){d(t,e)}),e.addEventListener("mouseleave",function(t){gsap.to(e,{scale:1,x:0,y:0,ease:"power3",duration:.6})})});let u=document.querySelector(".changeTheme"),p=localStorage.getItem("theme")||"light";function $(e){let t=document.documentElement,r=document.querySelector(".changeTheme img");"light"===e?(t.style.setProperty("--background-color","#f2ecdc"),t.style.setProperty("--black","black"),t.style.setProperty("--black-70percent","#1d1d1d"),t.style.setProperty("--black-hover","#00000020"),t.style.setProperty("--white","white"),t.style.setProperty("--white-90percent","#f2f2f2"),t.style.setProperty("--white-70percent","#d9d9d9"),t.style.setProperty("--white-10percent","#ffffff1a"),t.style.setProperty("--section5-background-first","#ffab2e"),t.style.setProperty("--section5-background-second","#ff9a03"),t.style.setProperty("--section5-card-first","#ffcb6d"),t.style.setProperty("--section5-card-second","#363029de"),t.style.setProperty("--categorySelector-card","#e8dfc7"),t.style.setProperty("--invert-icon-color","none"),t.style.setProperty("--invert-icon-color2","none"),t.style.setProperty("--invert-icon-color3","invert(99%) sepia(0%) saturate(0%) hue-rotate(141deg) brightness(109%) contrast(101%)"),r.src="../assets/VectorNight.svg"):"dark"===e&&(t.style.setProperty("--background-color","#0f0f0f"),t.style.setProperty("--black","#e7e7e7"),t.style.setProperty("--black-70percent","#dbdbdb"),t.style.setProperty("--black-hover","#ffffff20"),t.style.setProperty("--white","black"),t.style.setProperty("--white-90percent","#2e2e2e"),t.style.setProperty("--white-70percent","#141414"),t.style.setProperty("--white-10percent","#ffffff1a"),t.style.setProperty("--section5-background-first","#161512"),t.style.setProperty("--section5-background-second","#241f14"),t.style.setProperty("--categorySelector-card","#1d1d1d"),t.style.setProperty("--section5-card-first","#696969"),t.style.setProperty("--section5-card-second","#ff1f1fde"),t.style.setProperty("--invert-icon-color","invert(48%) brightness(1000%)"),t.style.setProperty("--invert-icon-color2","invert(99%) sepia(0%) saturate(0%) hue-rotate(338deg) brightness(113%) contrast(100%)"),t.style.setProperty("--invert-icon-color3","none"),r.src="../assets/VectorDay.svg"),localStorage.setItem("theme",e)}$(p),u.addEventListener("click",()=>{let e=localStorage.getItem("theme"),t="light"===e?"dark":"light";$(t)})});let cursor,cursorBorder;cursor=document.createElement("div"),cursorBorder=document.createElement("div"),cursor.classList.add("cursor"),cursorBorder.classList.add("cursorBorder"),document.body.appendChild(cursor),document.body.appendChild(cursorBorder);const cursorPos={x:0,y:0},cursorBorderPos={x:0,y:0};document.addEventListener("mousemove",e=>{cursorPos.x=e.clientX,cursorPos.y=e.clientY,cursor.style.transform=`translate(${e.clientX}px, ${e.clientY}px)`});const easting=8;function loop(){cursorBorderPos.x+=(cursorPos.x-cursorBorderPos.x)/8,cursorBorderPos.y+=(cursorPos.y-cursorBorderPos.y)/8,cursorBorder.style.transform=`translate(${cursorBorderPos.x}px, ${cursorBorderPos.y}px) rotate(45deg)`,requestAnimationFrame(loop)}function activateCustomCursors(){"ontouchstart"in window||document.querySelectorAll("[data-cursor]").forEach(e=>{e.addEventListener("mouseover",t=>{switch(e.dataset.cursor){case"pointerWhite":cursorBorder.style.boxShadow="0 0 0 0.1vmin white",cursor.style.backgroundColor="white";break;case"pointerDisable":cursorBorder.style.display="none",cursor.style.display="none";break;case"pointerBlendMode":cursorBorder.style.backgroundColor="white",cursorBorder.style.mixBlendMode="difference",cursorBorder.style.setProperty("--size","10vmin");break;case"pointerFocus":cursor.style.backgroundColor="black",cursorBorder.style.borderRadius="0",cursorBorder.style.setProperty("--size","4vmin"),cursorBorder.style.backgroundColor="white",cursorBorder.style.mixBlendMode="difference";break;case"pointerLink":cursor.style.display="none",cursorBorder.style.setProperty("--size","10vmin"),cursorBorder.style.backgroundColor="#f2ecdc ",cursorBorder.style.backgroundImage="url(../../assets/VectorFlesh4.svg)",cursorBorder.style.backgroundSize="3vmin 3vmin",cursorBorder.style.boxShadow="0 0 0 0.1vmin black";break;case"pointerLinkNavbar":cursor.style.display="none",cursorBorder.style.setProperty("--size","10vmin"),cursorBorder.style.backgroundColor="#ffffff30",cursorBorder.style.backdropFilter="blur(0.8vmin)",cursorBorder.style.backgroundImage="url(../../assets/VectorFlesh4.svg)",cursorBorder.style.backgroundSize="3vmin 3vmin",cursorBorder.style.boxShadow="0 0 0 0.1vmin black";break;case"pointerWaveBorder":cursorBorder.style.display="none",cursor.style.setProperty("--sizeMainCursor","30vmin"),cursor.style.background="linear-gradient(120deg, #ffffff, #000000, #ffffff, #000000, #ffffff)",cursor.style.backgroundSize=" 1600% 1600%",cursor.style.animation="blobRadius 5s ease infinite, blobBackground 15s ease infinite",cursor.style.mixBlendMode="difference";break;case"pointerClickable":cursorBorder.style.borderRadius="0",cursorBorder.style.boxShadow="0 0 0 0.1vmin black",cursorBorder.style.setProperty("--size","3vmin")}}),e.addEventListener("mouseout",e=>{cursorBorder.style.backgroundImage="unset",cursorBorder.style.backgroundColor="unset",cursor.style.background="unset",cursorBorder.style.mixBlendMode="unset",cursorBorder.style.setProperty("--size","0vmin"),cursor.style.setProperty("--sizeMainCursor","0"),cursor.style.animation="unset",cursorBorder.style.animation="unset",cursor.style.display="inline",cursorBorder.style.display="inline",cursorBorder.style.borderRadius="50%",cursorBorder.style.boxShadow="unset",cursor.style.backgroundColor="black",cursor.style.mixBlendMode="unset",cursorBorder.style.filter="unset",cursorBorder.style.backdropFilter="unset",cursorBorder.style.backgroundColor="transparent",cursor.style.width="var(--sizeMainCursor)",cursor.style.borderRadius="50%"})})}requestAnimationFrame(loop),document.addEventListener("click",function(){cursorBorder.style.boxShadow="0 0 0 0.1vmin black",cursorBorder.style.borderRadius="0",cursorBorder.style.setProperty("--size","2vmin"),setTimeout(function(){requestAnimationFrame(function(){cursorBorder.style.boxShadow="unset",cursorBorder.style.borderRadius="50%",cursorBorder.style.setProperty("--size","0vmin")})},200)}),"ontouchstart"in window&&(cursorBorder.style.display="none",cursor.style.display="none");const blogSelector=document.querySelector(".blogSelector"),categorySelector=document.querySelector(".categorySelector"),showMoreButton=document.querySelector("#showMore"),showRandomButton=document.querySelector(".section5 > div:last-child a:first-child");let currentIndex=0;const articlesPerPage=5;let blogs=[],currentArticles=[];function highlight(e,t){if(!t.trim())return e;let r=t.split(/\s+/),o=RegExp(`(${r.join("|")})`,"gi");return e.replace(o,e=>`<span class="highlight">${e}</span>`)}function displayArticles(e,t=!1,r=""){t||(blogSelector.innerHTML="",blogSelector.appendChild(showMoreButton.parentNode),currentIndex=0,currentArticles=e);let o=document.querySelector(".no-articles");if(o&&o.remove(),0===currentArticles.length){let s=document.createElement("div");s.className="noArticles",s.textContent="مقاله‌ی قابل نمایشی موجود نیست",blogSelector.appendChild(s),showMoreButton.style.display="none";return}let n=currentArticles.slice(currentIndex,currentIndex+5);n.forEach(e=>{let t=document.createElement("a");t.setAttribute("data-cursor","pointerLinkNavbar"),t.setAttribute("href",e.url),t.innerHTML=`
          <div class="card">
            <div>
              <div>
                <p>${highlight(e.date,r)}</p>
                <span>&nbsp;&nbsp;/&nbsp;&nbsp;</span>
                <p>${highlight(e.category,r)}</p>
              </div>
              <div>
              <a href="${e.url}">${highlight(e.title,r)}
              </a>
              </div>
              <p>${highlight(e.description,r)}</p>
            </div>
            <img src="../serverAssets/blogsCoverImg/${e.image}" alt="${highlight(e.title,r)} استرامیکس" />  
          </div>
        `,blogSelector.insertBefore(t,document.querySelector(".more"))}),(currentIndex+=5)>=currentArticles.length?showMoreButton.style.display="none":showMoreButton.style.display="flex",activateCustomCursors(),resetAnimations()}function searchProduct(e){let t=e.toLowerCase().split(/\s+/),r=blogs.filter(e=>t.every(t=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t))));displayArticles(r,!1,e)}function showRandomArticle(){if(0===blogs.length)return;let e=Math.floor(Math.random()*blogs.length),t=blogs[e];window.location.href=t.url}const today=new Date,version=`${today.getFullYear()}${(today.getMonth()+1).toString().padStart(2,"0")}${today.getDate().toString().padStart(2,"0")}`;fetch(`../serverAssets/blogs.json?version=${version}`).then(e=>e.json()).then(e=>{blogs=e.blogs;let t={};blogs.forEach(e=>{let r=e.category;t[r]?t[r]++:t[r]=1});let r=blogs.length,o=Object.entries(t).sort((e,t)=>t[1]-e[1]),s=document.createElement("div");s.setAttribute("data-cursor","pointerClickable"),s.innerHTML=`
          <p id="allProducts">همه‌ی مقالات</p>
          <p>${r}</p>
        `,s.addEventListener("click",()=>displayArticles(blogs)),categorySelector.appendChild(s),o.forEach(([e,t])=>{let r=document.createElement("div");r.setAttribute("data-cursor","pointerClickable"),r.innerHTML=`
            <p>${e}</p>
            <p>${t}</p>
          `,r.addEventListener("click",()=>{let t=blogs.filter(t=>t.category===e);displayArticles(t)}),categorySelector.appendChild(r)}),blogs.forEach(e=>{e.dateObject=new Date(e.dateConvert)}),blogs.sort((e,t)=>t.dateObject-e.dateObject),displayArticles(blogs),showMoreButton.addEventListener("click",()=>{displayArticles(currentArticles,!0)}),showRandomButton.addEventListener("click",showRandomArticle)}).catch(e=>console.error("Error fetching data:",e));const registerButton=document.querySelector(".section4 > p:nth-child(6)"),emailRegex=/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;function validateEmailInput(e){let t=e.value,r=document.querySelector("#emailFeedback");Object.assign(registerButton.style,{right:"65%",top:"50%"}),emailRegex.test(t)?(e.style.color="#70cd5d",r.textContent=""):(e.style.color="#c6383d",r.textContent="“فرمت ایمیل درست نیست!”",r.classList.remove("animate"),r.offsetWidth,r.classList.add("animate"))}let processOnlyOnce=!1;function processEmailInput(){if(processOnlyOnce)return;let e=document.querySelector("#email"),t=e.value;if(Object.assign(registerButton.style,{right:"65%",top:"50%"}),emailRegex.test(t)){let r=new FormData;r.append("email",t);let o=new XMLHttpRequest;o.open("POST","../src/php/processEmail.php",!0),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(registerButton.style.backgroundColor=200===o.status?"#5dba82":"#c44141",registerButton.textContent=200===o.status?"ثبت شد!":"ثبت نشد، دوباره تلاش کنید!",200===o.status?processOnlyOnce=!0:console.error("Error adding document: ",o.status))},o.send(r)}else registerButton.style.backgroundColor="#c44141",registerButton.textContent="ایمیل را اصلاح کنید!"}