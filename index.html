<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.glitch.global/8352fc0e-bebe-4680-ae0b-269da8b54259/ScrollSmoother.min.js"></script>
    <script src="https://cdn.glitch.global/8352fc0e-bebe-4680-ae0b-269da8b54259/SplitText.min.js"></script>

    <link rel="stylesheet" href="src/css/main.css" />
    <link rel="stylesheet" href="src/css/index.css" />
  </head>
  <body>
    <main id="smooth-wrapper">
      <div id="smooth-content">
        <section class="hero">
          <div class="imageSide">
            <img src="assets/productImg/strusin-brownLiquid.jpg" alt="" />
            <div id="movingBox"></div>
          </div>
          <div class="titleSide">
            <div class="top">
              <hr />
              <h1>بسپار بتن ايرانيان هوشمند</h1>
            </div>
            <h1 class="midOne">strumix</h1>
            <div class="midTwo">
              <p>Admixture</p>
              <p>And</p>
              x
              <p>Structure</p>
            </div>
            <div class="midThree">Soical Icons</div>
          </div>
          <img class="scrollFlesh" src="assets/VectorFlesh3.svg" alt="" />
        </section>
        <section class="section2">
          <img src="assets/img/Strumix-structure-view1.jpg" alt="Strumix" />
          <div class="cyclingCircles">
            <div class="Circles">
              <div class="Circles1"></div>
              <div class="Circles2"></div>
            </div>
          </div>
        </section>
        <section class="section3">
          <div><img src="assets/img/Strumix-structure-view2.jpg" alt="Strumix" /></div>
          <div class="textSide">
            <h2>استراميکس</h2>
            <p>
              <span>&nbsp;</span>
              یک سازمان دانش‌محور است که با ارائه محصولات و خدمات نوآورانه، به دنبال کمک به ساخت و
              ساز سریع‌تر، آسان‌تر، کم‌هزینه‌تر و با دوام طولانی‌تر می‌باشد. این گروه با اتکا به
              تجربه و تخصص خود در زمینه تحقیق و توسعه، مهندسی فنی، تولید، اجرا و مشاوره مواد شیمیایی
              ساختمان، افزودنی‌های بتن، واتراستاپ و اسپیسر، همواره در تلاش است تا با استفاده از
              تکنیک‌های نوین ساخت و ساز، به ارتقای کیفیت صنعت ساخت و ساز کشور کمک نماید.
            </p>
            <hr />
            <p>
              گروه استراميکس در زمینه‌های مختلف پوشش‌های سطحی آب‌بند، رزین‌های مورد مصرف در بتن و
              ... با پژوهشگاه رنگ و رزین ایران همکاری مستقیم دارد و به عنوان یک شرکت دانش‌محور به
              تأیید این پژوهشگاه رسیده است. همچنین، مدیریت این گروه توسط صاحبان آن انجام می‌شود که
              این امر به کوتاه شدن فرآیندها و تصمیم‌گیری سریع‌تر برای مشتریان کمک می‌کند. گروه
              استراميکس برای مشتریان خود دریافت سریع محصولات، پاسخ‌های فنی سریع و دقیق و خدمات پس از
              فروش مناسب را تضمین می‌کند.
            </p>
          </div>
        </section>
        <section class="section4">
          <div>
            <h3><span id="line">&nbsp;</span>محصولات استرامیکس</h3>
          </div>
          <div id="concreteAdditive">
            <div>
              <p>افزودنی های بتن</p>
              <p>افزودنی های بتن</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="constructionChemicals">
            <div>
              <p>مواد شيميايي صنعت ساختمان</p>
              <p>مواد شيميايي صنعت ساختمان</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="waterstop">
            <div>
              <p>واتراستاپ ها</p>
              <p>واتراستاپ ها</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="plastic-spacers">
            <div>
              <p>اسپيسرهای پلاستيکي بتن</p>
              <p>اسپيسرهای پلاستيکي بتن</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="executiveAndConsulting">
            <div>
              <p>خدمات اجرایی و مشاوره ای</p>
              <p>خدمات اجرایی و مشاوره ای</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="raw-materials">
            <div>
              <p>مواد اولیه افزودنی بتن و شیمی ساختمان</p>
              <p>مواد اولیه افزودنی بتن و شیمی ساختمان</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <span id="productImg"><img src="assets/productImg/struproof-hp.jpg" alt="" /></span>
          <div>
            <div>
              <a href="products.html">
                <p>دیدن کاتالوگ محصولات</p>
                <div>
                  <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
                  <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
                </div>
              </a>
            </div>
          </div>
        </section>
        <section class="section5">section5section5section5section5</section>
      </div>
    </main>
  </body>
  <script>
    gsap.registerPlugin(ScrollTrigger, ScrollSmoother, SplitText);

    window.addEventListener("load", (event) => {
      ScrollSmoother.create({
        wrapper: "#smooth-wrapper",
        contect: "#smooth-content",
        smooth: 1,
        effects: true,
        smoothTouch: false,
      });
    });

    // section pining effect
    let sections = gsap.utils.toArray(".section2, .section3, .section4, .section5");

    sections.forEach((section, i) => {
      if (i < 3) {
        ScrollTrigger.create({
          trigger: section,
          start: "top top",
          pin: true,
          pinSpacing: false,
          onUpdate: (self) => {
            if (self.direction === -1) {
              section.style.borderRadius = ""; // Set border-radius to 0 when section is scrolled up
            } else {
              section.style.borderRadius = "0"; // Revert border-radius to default when section is scrolled down
            }
          },
        });
      } else if (i === 3) {
        ScrollTrigger.create({
          trigger: section,
          start: "top top",
          endTrigger: sections[i - 1],
          end: "bottom top",
          pin: true,
          pinSpacing: false,
          onUpdate: (self) => {
            if (self.direction === -1) {
              section.style.borderRadius = ""; // Set border-radius to 0 when section is scrolled up
            } else {
              section.style.borderRadius = "0"; // Revert border-radius to default when section is scrolled down
            }
          },
        });
      }
    });
    // hero---------------------------
    document.addEventListener("mousemove", function (e) {
      var { innerWidth: pageWidth, innerHeight: pageHeight } = window;

      var mouseXPercent = (e.clientX / pageWidth) * 100;
      var mouseYPercent = (e.clientY / pageHeight) * 100;

      document.getElementById("movingBox").style.transform = `rotate(-35deg) translate(${
        (-50 + mouseXPercent) / 6
      }%, ${(-50 + mouseYPercent) * 2}%)`;
    });

    gsap.to("#movingBox", {
      scrollTrigger: {
        trigger: "#movingBox",
        start: "bottom top",
        end: "bottom top",
        toggleActions: "play none none reset",
      },
      display: "none",
    });

    gsap.to(".hero .scrollFlesh", {
      scrollTrigger: {
        trigger: ".hero",
        start: "top top",
        end: "bottom top",
        toggleActions: "play none none reverse",
      },
      opacity: 0,
      duration: 0.5,
    });
    // section2---------------------------
    gsap.to(".section2 img", {
      scrollTrigger: {
        trigger: ".section2 img",
        start: "top 90%",
        end: "bottom 90%",
        scrub: 2,
      },
      width: "100%",
      margin: "2vw 0",
      duration: 1,
    });
    gsap.to(".section2", {
      scrollTrigger: {
        trigger: ".section2 img",
        start: "bottom 70%",
        end: "bottom 50%",
        scrub: 2,
      },
      filter: "blur(5px)",
    });
    gsap.to(".section2 .Circles", {
      scrollTrigger: {
        trigger: ".section2 .Circles",
        start: "top 100%",
        end: "bottom 10%",
        scrub: 2,
      },
      transform: "rotate3d(0, 1, 0, 180deg)",
    });
    gsap.to(".cyclingCircles", {
      scrollTrigger: {
        trigger: ".section2",
        start: "100vh top",
        end: "100vh top",
        toggleActions: "play none none reset",
      },
      display: "none",
    });
    // section3---------------------------
    gsap.to(".section3 div:nth-child(1) img", {
      scrollTrigger: {
        trigger: ".section3",
        start: "70% bottom",
        end: "70% top",
        scrub: 4,
      },
      height: "200%",
      width: "200%",
    });
    gsap.to(".section3 .textSide hr", {
      scrollTrigger: {
        trigger: ".section3",
        start: "60% bottom",
        end: "60% top",
        scrub: 4,
      },
      width: "100%",
    });
    gsap.from(
      new SplitText(".section3 .textSide h2", {
        type: "chars",
        tagName: "span",
        tag: "span",
      }).chars,
      {
        scrollTrigger: {
          trigger: ".section3 .textSide h2",
          start: "40% bottom",
          end: "40% top",
          toggleActions: "play none none reset",
        },
        delay: 0.5,
        opacity: 0.2,
        ease: "power3.out",
        stagger: 0.15,
      }
    );
    //section4--------------------
    gsap.from(
      new SplitText(".section4 h3", {
        type: "chars",
        tagName: "span",
        tag: "span",
      }).chars,
      {
        scrollTrigger: {
          trigger: ".section4 h3",
          start: "40% bottom",
          end: "40% top",
          toggleActions: "play none none reset",
          // markers: true,
        },
        delay: 0.5,
        opacity: 0.3,
        ease: "power3.out",
        stagger: 0.15,
      }
    );
    gsap.to(".section4 h3 > #line", {
      scrollTrigger: {
        trigger: ".section4 h3",
        start: "40% bottom",
        end: "40% top",
        scrub: 4,
      },
      width: "15vmin",
    });

    const productImg = document.getElementById("productImg");
    const windowWidth = window.innerWidth;
    const imgWidth = productImg.offsetWidth;
    const centerX = windowWidth / 2 - imgWidth / 3;

    gsap.set(productImg, {
      xPercent: -50,
      yPercent: -50,
      transformOrigin: "center",
      left: centerX + "px",
    });

    const followMouse = (e) => {
      const mouseX = e.clientX;
      const mouseY = e.clientY;

      const distanceFromCenter = mouseX - centerX;

      gsap.to(productImg, {
        duration: 1,
        ease: "power3",
        x: distanceFromCenter * 0.3,
      });
      gsap.to(productImg, {
        duration: 1,
        ease: "power3",
        y: mouseY,
      });

      const clipPath = `polygon(
    ${(mouseX / window.innerWidth) * 10}% 0%,
    ${100 - (mouseY / window.innerHeight) * 10}% 0%,
    ${100 - (mouseX / window.innerWidth) * 10}% 100%,
    ${(mouseY / window.innerHeight) * 10}% 100%)`;

      gsap.to(productImg, {
        duration: 1,
        ease: "power3",
        clipPath: clipPath,
      });
    };
    document.addEventListener("mousemove", followMouse);

    const products = {
      concreteAdditive: "struproof-hp.jpg",
      constructionChemicals: "strutop-rm450.jpg",
      waterstop: "struswell.jpg",
      "plastic-spacers": "plastic-spacers.jpg",
      executiveAndConsulting: "strusin-concrete2.jpg",
      "raw-materials": "Strumin-gel4.jpg",
    };

    const section4 = document.querySelector(".section4");
    const boxes = section4.querySelectorAll("div:not(:first-child):not(:last-child)");

    boxes.forEach((box) => {
      box.addEventListener("mouseover", function () {
        productImg.style.opacity = "1";
        productImg.style.filter = "blur(0)";
        productImg.innerHTML = `<img src="assets/productImg/${products[box.id]}" alt="" />`;
      });

      box.addEventListener("mouseout", function () {
        productImg.style.opacity = "0";
        productImg.style.filter = "blur(5vmin)";
      });

      box.addEventListener("click", function () {
        const productID = this.id;
        const url = `products.html?productID=${productID}`;
        window.location.href = url;
      });
    });
  </script>
</html>
