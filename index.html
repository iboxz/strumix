<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.glitch.global/8352fc0e-bebe-4680-ae0b-269da8b54259/ScrollSmoother.min.js"></script>
    <script src="https://cdn.glitch.global/8352fc0e-bebe-4680-ae0b-269da8b54259/SplitText.min.js"></script>

    <link rel="stylesheet" href="src/css/main.css" />
    <style>
      .hero {
        height: 90vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #f2ecdc;
      }
      .section2 {
        display: flex;
        justify-content: center;
        background: #f2ecdc;
      }

      .section2 img {
        object-fit: cover;
        object-position: center;
        width: 70%;
        height: 100vh;
        border-radius: 5vmin 5vmin 0 0;
      }
      .section3 {
        background: #0f0f0f;
        height: 100vh;
        border-radius: 5vmin 5vmin 0 0;
      }
      .section4 {
        background: #cca63f;
        height: 100vh;
        border-radius: 5vmin 5vmin 0 0;
      }
    </style>
  </head>
  <body>
    <main id="smooth-wrapper">
      <div id="smooth-content">
        <section class="hero">strumix</section>
        <section class="section2">
          <img src="assets/img/Strumix.jpg" alt="Strumix" />
        </section>
        <section class="section3">Lorem ipsum dolor sit</section>
        <section class="section4">Lorem ipsum dolor sit</section>
        <section class="NuNStickyContainer">Lorem ipsum dolor sit</section>
      </div>
    </main>
  </body>
  <script>
    gsap.registerPlugin(ScrollTrigger, ScrollSmoother, SplitText);

    window.addEventListener("load", (event) => {
      ScrollSmoother.create({
        wrapper: "#smooth-wrapper",
        contect: "#smooth-content",
        smooth: 1,
        effects: true,
        smoothTouch: false,
      });
    });
    gsap.to(".section2 img", {
      scrollTrigger: {
        trigger: ".section2 img",
        start: "top 90%",
        end: "bottom 90%",
        scrub: 2,
        markers: true,
      },
      width: "100%",
      duration: 1,
    });

    gsap.to(".section2", {
      scrollTrigger: {
        trigger: ".section2",
        start: "top top",
        pin: true,
        pinSpacing: false,
      },
    });
    gsap.to(".section3", {
      scrollTrigger: {
        trigger: ".section3",
        start: "top top",
        pin: true,
        pinSpacing: false,
      },
    });
    gsap.to(".section4", {
      scrollTrigger: {
        trigger: ".section4",
        start: "top top",
        pin: true,
        pinSpacing: false,
      },
    });
    gsap.to(".NuNStickyContainer", {
      scrollTrigger: {
        trigger: ".NuNStickyContainer",
        start: "top top",
        pin: true,
        pinSpacing: false,
      },
    });

    ScrollTrigger.create({
      snap: {
        snapTo: (progress, self) => {
          let section2Start = ScrollTrigger.getById("section2").start,
            section3Start = ScrollTrigger.getById("section3").start,
            snapScroll = gsap.utils.snap([section2Start, section3Start], self.scroll());
          return gsap.utils.normalize(0, ScrollTrigger.maxScroll(window), snapScroll);
        },
        duration: 0.5,
      },
    });
  </script>
</html>
