<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.glitch.global/8352fc0e-bebe-4680-ae0b-269da8b54259/ScrollSmoother.min.js"></script>
    <script src="https://cdn.glitch.global/8352fc0e-bebe-4680-ae0b-269da8b54259/SplitText.min.js"></script>

    <link rel="stylesheet" href="src/css/main.css" />
    <link rel="stylesheet" href="src/css/index.css" />
  </head>
  <body>
    <main id="smooth-wrapper">
      <div id="smooth-content">
        <section class="hero">
          <div class="imageSide">
            <img src="assets/productImg/strusin-brownLiquid.jpg" alt="" />
            <div id="movingBox"></div>
          </div>
          <div class="titleSide">
            <div class="top">
              <hr />
              <h1>بسپار بتن ايرانيان هوشمند</h1>
            </div>
            <h1 class="midOne">strumix</h1>
            <div class="midTwo">
              <p>Admixture</p>
              <p>And</p>
              x
              <p>Structure</p>
            </div>
            <div class="midThree">Soical Icons</div>
          </div>
          <img class="scrollFlesh" src="assets/VectorFlesh3.svg" alt="" />
        </section>
        <section class="section2">
          <img src="assets/img/Strumix-structure-view1.jpg" alt="Strumix" />
          <div class="cyclingCircles">
            <div class="Circles">
              <div class="Circles1"></div>
              <div class="Circles2"></div>
            </div>
          </div>
        </section>
        <section class="section3">
          <div><img src="assets/img/Strumix-structure-view2.jpg" alt="Strumix" /></div>
          <div class="textSide">
            <h2>استراميکس</h2>
            <p>
              <span>&nbsp;</span>
              یک سازمان دانش‌محور است که با ارائه محصولات و خدمات نوآورانه، به دنبال کمک به ساخت و
              ساز سریع‌تر، آسان‌تر، کم‌هزینه‌تر و با دوام طولانی‌تر می‌باشد. این گروه با اتکا به
              تجربه و تخصص خود در زمینه تحقیق و توسعه، مهندسی فنی، تولید، اجرا و مشاوره مواد شیمیایی
              ساختمان، افزودنی‌های بتن، واتراستاپ و اسپیسر، همواره در تلاش است تا با استفاده از
              تکنیک‌های نوین ساخت و ساز، به ارتقای کیفیت صنعت ساخت و ساز کشور کمک نماید.
            </p>
            <hr />
            <p>
              گروه استراميکس در زمینه‌های مختلف پوشش‌های سطحی آب‌بند، رزین‌های مورد مصرف در بتن و
              ... با پژوهشگاه رنگ و رزین ایران همکاری مستقیم دارد و به عنوان یک شرکت دانش‌محور به
              تأیید این پژوهشگاه رسیده است. همچنین، مدیریت این گروه توسط صاحبان آن انجام می‌شود که
              این امر به کوتاه شدن فرآیندها و تصمیم‌گیری سریع‌تر برای مشتریان کمک می‌کند. گروه
              استراميکس برای مشتریان خود دریافت سریع محصولات، پاسخ‌های فنی سریع و دقیق و خدمات پس از
              فروش مناسب را تضمین می‌کند.
            </p>
          </div>
        </section>
        <section class="section4">
          <div>
            <h3><span id="line">&nbsp;</span>محصولات استرامیکس</h3>
          </div>
          <div id="concreteAdditive">
            <div>
              <p>افزودنی های بتن</p>
              <p>افزودنی های بتن</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="constructionChemicals">
            <div>
              <p>مواد شيميايي صنعت ساختمان</p>
              <p>مواد شيميايي صنعت ساختمان</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="waterstop">
            <div>
              <p>واتراستاپ ها</p>
              <p>واتراستاپ ها</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="plastic-spacers">
            <div>
              <p>اسپيسرهای پلاستيکي بتن</p>
              <p>اسپيسرهای پلاستيکي بتن</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="executiveAndConsulting">
            <div>
              <p>خدمات اجرایی و مشاوره ای</p>
              <p>خدمات اجرایی و مشاوره ای</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <div id="raw-materials">
            <div>
              <p>مواد اولیه افزودنی بتن و شیمی ساختمان</p>
              <p>مواد اولیه افزودنی بتن و شیمی ساختمان</p>
            </div>
            <div>
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
              <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
            </div>
          </div>
          <span id="productImg"><img src="assets/productImg/struproof-hp.jpg" alt="" /></span>
          <div>
            <div>
              <a href="products.html">
                <p>دیدن کاتالوگ محصولات</p>
                <div>
                  <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
                  <img src="assets/VectorFlesh4.svg" alt="flesh Icon" />
                </div>
              </a>
            </div>
          </div>
        </section>
        <section class="noPinSection">
          <section class="section5">
            <div>
              <div class="infiniteScrollText">
                <div>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                  <span>Strumix&nbsp;&nbsp;-&nbsp;&nbsp;</span>
                </div>
              </div>
              <div class="infiniteScrollText">
                <div>
                  <span>&nbsp;-&nbsp;بسپار بتن ايرانيان هوشمند</span>
                  <span>&nbsp;-&nbsp;بسپار بتن ايرانيان هوشمند</span>
                  <span>&nbsp;-&nbsp;بسپار بتن ايرانيان هوشمند</span>
                  <span>&nbsp;-&nbsp;بسپار بتن ايرانيان هوشمند</span>
                </div>
              </div>
            </div>
          </section>
          <section class="section6">
            <div>
              <h3><span id="line">&nbsp;</span>برترین پروژه های استرامیکس</h3>
            </div>
            <div>
              <table>
                <thead>
                  <tr>
                    <th>نام پروژه</th>
                    <th>محل پروژه</th>
                    <th>کارفرما یا پیمانکار</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>ایستگاه مترو احسان شمالی</td>
                    <td>تهران</td>
                    <td>شرکت اگور</td>
                  </tr>
                  <tr>
                    <td>مترو اسلامشهر</td>
                    <td>تهران</td>
                    <td>موسسه حرا</td>
                  </tr>
                  <tr>
                    <td>مجتمع مسکونی چیتگر</td>
                    <td>تهران</td>
                    <td>شرکت پالنده</td>
                  </tr>
                  <tr>
                    <td>ورزشگاه ۸ هزار نفری کاله مازندران</td>
                    <td>آمل</td>
                    <td>شرکت کاله</td>
                  </tr>
                  <tr>
                    <td>بیمارستان آتیه</td>
                    <td>تهران</td>
                    <td>پایا سازه پاسارگاد</td>
                  </tr>
                  <tr>
                    <td>کفسازی محوطه و سالنها</td>
                    <td>اسلامشهر</td>
                    <td>سمندریل</td>
                  </tr>
                  <tr>
                    <td>پردیس</td>
                    <td>تهران</td>
                    <td>مخابرات</td>
                  </tr>
                  <tr>
                    <td>مجتمع تجاری اکسین</td>
                    <td>آمل</td>
                    <td>گروه اکسین</td>
                  </tr>
                  <tr>
                    <td>اجرای ترمیم و بازسازی و زهکشی</td>
                    <td>آمل</td>
                    <td>کاله آمل واحد گوشتی</td>
                  </tr>
                  <tr>
                    <td>مجتمع تجاری اداری ناهید</td>
                    <td>تهران</td>
                    <td>آقای دکتر وحیدی</td>
                  </tr>
                  <tr>
                    <td>احداث فولاد شادگان</td>
                    <td>شادگان</td>
                    <td>متر اسامان</td>
                  </tr>
                  <tr>
                    <td>ورزشگاه ۷۰۰۰ نفری</td>
                    <td>شیراز</td>
                    <td>تكتاب</td>
                  </tr>
                  <tr>
                    <td>کفسازی</td>
                    <td>لاهیجان</td>
                    <td>چای رفاه</td>
                  </tr>
                  <tr>
                    <td>مجتمع تجاری کاسپین</td>
                    <td>بابل</td>
                    <td>کارفرما</td>
                  </tr>
                  <tr>
                    <td>بیمارستان امام خمینی</td>
                    <td>تهران</td>
                    <td>رکیندژ</td>
                  </tr>
                  <tr>
                    <td>برج های الهیه</td>
                    <td>ایزد شهر</td>
                    <td>آقای یاوری</td>
                  </tr>
                  <tr>
                    <td>ترمیم پل پلور جاده هراز</td>
                    <td>پلور</td>
                    <td>راهداری مازندران</td>
                  </tr>
                  <tr>
                    <td>کفسازی</td>
                    <td>بوشهر</td>
                    <td>آقای علوی</td>
                  </tr>
                  <tr>
                    <td>ایران مال</td>
                    <td>تهران</td>
                    <td>توسعه بین الملل زیگورات</td>
                  </tr>
                  <tr>
                    <td>کفسازی</td>
                    <td>رشت</td>
                    <td>سپیده طیور پارس نیاک</td>
                  </tr>
                  <tr>
                    <td>باغ موزه اهواز</td>
                    <td>اهواز</td>
                    <td>پردیس اسکلت</td>
                  </tr>
                  <tr>
                    <td>برج سفید</td>
                    <td>سرخرود</td>
                    <td>آقای خباز کناری</td>
                  </tr>
                  <tr>
                    <td>مجتمع تجاری اداری برزیل</td>
                    <td>تهران</td>
                    <td>آبادگران نو اندیش</td>
                  </tr>
                  <tr>
                    <td>پروژه دانشگاه</td>
                    <td>بابل</td>
                    <td>جهاد دانشگاهی نصر</td>
                  </tr>
                  <tr>
                    <td>تهران بیمارستان اسلامشهر</td>
                    <td>تهران</td>
                    <td>تكتاب</td>
                  </tr>
                  <tr>
                    <td>بهار خواب</td>
                    <td>ساری</td>
                    <td>کفسازی</td>
                  </tr>
                  <tr>
                    <td>دیزل سازه</td>
                    <td>تهران</td>
                    <td>رزمال</td>
                  </tr>
                  <tr>
                    <td>مسکن و شهرسازی اهواز</td>
                    <td>اهواز</td>
                    <td>متروپل</td>
                  </tr>
                  <tr>
                    <td>مهندس فاضل</td>
                    <td>آمل</td>
                    <td>کفسازی پمپ بنزین رزکه آمل</td>
                  </tr>
                  <tr>
                    <td>ایستافر و کارفرما</td>
                    <td>تهران</td>
                    <td>هتل فرشته</td>
                  </tr>
                  <tr>
                    <td>آقای عباسی</td>
                    <td>همدان</td>
                    <td>کفسازی</td>
                  </tr>
                  <tr>
                    <td>آقای حسینی</td>
                    <td>بابلسر</td>
                    <td>مجتمع تجاری پارس مال</td>
                  </tr>
                  <tr>
                    <td>فولادين ذوب</td>
                    <td>آمل</td>
                    <td>تصفیه خانه فاضلاب</td>
                  </tr>
                  <tr>
                    <td>کارفرما</td>
                    <td>تهران</td>
                    <td>بیمارستان سرطان</td>
                  </tr>
                  <tr>
                    <td>آقای گرجیان</td>
                    <td>فریدون کنار و سرخرود</td>
                    <td>مجموعه پروژه های آرال</td>
                  </tr>
                  <tr>
                    <td>پایدار بام</td>
                    <td>تهران</td>
                    <td>بیمارستان سوانح و سوختگی نیکان</td>
                  </tr>
                  <tr>
                    <td>آقای فضلی</td>
                    <td>تهران</td>
                    <td>مجتمع تجاری ساعی</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>
        </section>
      </div>
    </main>
  </body>
  <script>
    gsap.registerPlugin(ScrollTrigger, ScrollSmoother, SplitText);

    window.addEventListener("load", (event) => {
      ScrollSmoother.create({
        wrapper: "#smooth-wrapper",
        contect: "#smooth-content",
        smooth: 1,
        effects: true,
        smoothTouch: false,
      });
    });

    // section pining effect

    window.addEventListener("load", (event) => {
      setTimeout(() => {
        let sections = gsap.utils.toArray(".section2, .section3, .section4, .noPinSection");

        sections.forEach((section, i) => {
          if (i < 3) {
            ScrollTrigger.create({
              trigger: section,
              start: "top top",
              pin: true,
              pinSpacing: false,
              onUpdate: (self) => {
                if (self.direction === -1) {
                  section.style.borderRadius = ""; // Set border-radius to 0 when section is scrolled up
                } else {
                  section.style.borderRadius = "0"; // Revert border-radius to default when section is scrolled down
                }
              },
            });
          } else if (i === 3) {
            ScrollTrigger.create({
              trigger: section,
              start: "top top",
              endTrigger: sections[i - 1],
              end: "top top",
              pin: true,
              pinSpacing: false,
              // markers: true,
              onUpdate: (self) => {
                if (self.direction === -1) {
                  section.style.borderRadius = ""; // Set border-radius to 0 when section is scrolled up
                } else {
                  section.style.borderRadius = "0"; // Revert border-radius to default when section is scrolled down
                }
              },
            });
          }
        });
      }, 500);
    });
    // hero---------------------------
    document.addEventListener("mousemove", function (e) {
      var { innerWidth: pageWidth, innerHeight: pageHeight } = window;

      var mouseXPercent = (e.clientX / pageWidth) * 100;
      var mouseYPercent = (e.clientY / pageHeight) * 100;

      document.getElementById("movingBox").style.transform = `rotate(-35deg) translate(${
        (-50 + mouseXPercent) / 6
      }%, ${(-50 + mouseYPercent) * 2}%)`;
    });

    gsap.to("#movingBox", {
      scrollTrigger: {
        trigger: "#movingBox",
        start: "bottom top",
        end: "bottom top",
        toggleActions: "play none none reset",
      },
      display: "none",
    });

    gsap.to(".hero .scrollFlesh", {
      scrollTrigger: {
        trigger: ".hero",
        start: "top top",
        end: "bottom top",
        toggleActions: "play none none reverse",
      },
      opacity: 0,
      duration: 0.5,
    });
    // section2---------------------------
    gsap.to(".section2 img", {
      scrollTrigger: {
        trigger: ".section2 img",
        start: "top 90%",
        end: "bottom 90%",
        scrub: 2,
      },
      width: "100%",
      margin: "2vw 0",
      duration: 1,
    });
    gsap.to(".section2", {
      scrollTrigger: {
        trigger: ".section2 img",
        start: "bottom 70%",
        end: "bottom 50%",
        scrub: 2,
      },
      filter: "blur(5px)",
    });
    gsap.to(".section2 .Circles", {
      scrollTrigger: {
        trigger: ".section2 .Circles",
        start: "top 100%",
        end: "bottom 10%",
        scrub: 2,
      },
      transform: "rotate3d(0, 1, 0, 180deg)",
    });
    gsap.to(".cyclingCircles", {
      scrollTrigger: {
        trigger: ".section2",
        start: "100vh top",
        end: "100vh top",
        toggleActions: "play none none reset",
      },
      display: "none",
    });
    // section3---------------------------
    gsap.to(".section3 div:nth-child(1) img", {
      scrollTrigger: {
        trigger: ".section3",
        start: "70% bottom",
        end: "70% top",
        scrub: 4,
      },
      height: "200%",
      width: "200%",
    });
    gsap.to(".section3 .textSide hr", {
      scrollTrigger: {
        trigger: ".section3",
        start: "60% bottom",
        end: "60% top",
        scrub: 4,
      },
      width: "100%",
    });
    gsap.from(
      new SplitText(".section3 .textSide h2", {
        type: "chars",
        tagName: "span",
        tag: "span",
      }).chars,
      {
        scrollTrigger: {
          trigger: ".section3 .textSide h2",
          start: "40% bottom",
          end: "40% top",
          toggleActions: "play none none reset",
        },
        delay: 0.5,
        opacity: 0.2,
        ease: "power3.out",
        stagger: 0.15,
      }
    );
    //section4--------------------
    gsap.from(
      new SplitText(".section4 h3", {
        type: "chars",
        tagName: "span",
        tag: "span",
      }).chars,
      {
        scrollTrigger: {
          trigger: ".section4 h3",
          start: "40% bottom",
          end: "40% top",
          toggleActions: "play none none reset",
          // markers: true,
        },
        delay: 0.5,
        opacity: 0.3,
        ease: "power3.out",
        stagger: 0.15,
      }
    );
    gsap.to(".section4 h3 > #line", {
      scrollTrigger: {
        trigger: ".section4 h3",
        start: "40% bottom",
        end: "40% top",
        scrub: 4,
      },
      width: "15vmin",
    });

    const productImg = document.getElementById("productImg");
    const windowWidth = window.innerWidth;
    const imgWidth = productImg.offsetWidth;
    const centerX = windowWidth / 2 - imgWidth / 3;

    gsap.set(productImg, {
      xPercent: -50,
      yPercent: -50,
      transformOrigin: "center",
      left: centerX + "px",
    });

    const followMouse = (e) => {
      const mouseX = e.clientX;
      const mouseY = e.clientY;

      const distanceFromCenter = mouseX - centerX;

      gsap.to(productImg, {
        duration: 1,
        ease: "power3",
        x: distanceFromCenter * 0.3,
      });
      gsap.to(productImg, {
        duration: 1,
        ease: "power3",
        y: mouseY,
      });

      const clipPath = `polygon(
    ${(mouseX / window.innerWidth) * 10}% 0%,
    ${100 - (mouseY / window.innerHeight) * 10}% 0%,
    ${100 - (mouseX / window.innerWidth) * 10}% 100%,
    ${(mouseY / window.innerHeight) * 10}% 100%)`;

      gsap.to(productImg, {
        duration: 1,
        ease: "power3",
        clipPath: clipPath,
      });
    };
    document.addEventListener("mousemove", followMouse);

    const products = {
      concreteAdditive: "struproof-hp.jpg",
      constructionChemicals: "strutop-rm450.jpg",
      waterstop: "struswell.jpg",
      "plastic-spacers": "plastic-spacers.jpg",
      executiveAndConsulting: "strusin-concrete2.jpg",
      "raw-materials": "Strumin-gel4.jpg",
    };

    const section4 = document.querySelector(".section4");
    const boxes = section4.querySelectorAll("div:not(:first-child):not(:last-child)");

    boxes.forEach((box) => {
      box.addEventListener("mouseover", function () {
        productImg.style.opacity = "1";
        productImg.style.filter = "blur(0)";
        productImg.innerHTML = `<img src="assets/productImg/${products[box.id]}" alt="" />`;
      });

      box.addEventListener("mouseout", function () {
        productImg.style.opacity = "0";
        productImg.style.filter = "blur(5vmin)";
      });

      box.addEventListener("click", function () {
        const productID = this.id;
        const url = `products.html?productID=${productID}`;
        window.location.href = url;
      });
    });

    //---------------------------------------------------

    gsap.to(".section5 > div", {
      scrollTrigger: {
        trigger: ".section5",
        start: "top center",
        end: "bottom center",
        scrub: 2,
        // markers: true,
      },
      y: "100%",
    });
    let loops = gsap.utils.toArray(".section5 .infiniteScrollText div").map((line, i) => {
        const links = line.querySelectorAll(".section5  .infiniteScrollText div span");
        return horizontalLoop(links, {
          repeat: -1,
          speed: 1.5 + i * 0.5,
          reversed: false,
          paddingRight: parseFloat(gsap.getProperty(links[0], "marginRight", "px")),
        });
      }),
      currentScroll = 0,
      scrollDirection = 1;

    window.addEventListener("scroll", () => {
      let direction = window.pageYOffset > currentScroll ? 1 : -1;
      if (direction !== scrollDirection) {
        loops.forEach((tl) => {
          gsap.to(tl, { timeScale: direction, overwrite: true });
        });
        scrollDirection = direction;
      }
      currentScroll = window.pageYOffset;
    });

    function horizontalLoop(items, config) {
      items = gsap.utils.toArray(items);
      config = config || {};
      let tl = gsap.timeline({
          repeat: config.repeat,
          paused: config.paused,
          defaults: { ease: "none" },
          onReverseComplete: () => tl.totalTime(tl.rawTime() + tl.duration() * 100),
        }),
        length = items.length,
        startX = items[0].offsetLeft,
        times = [],
        widths = [],
        xPercents = [],
        curIndex = 0,
        pixelsPerSecond = (config.speed || 1) * 100,
        snap = config.snap === false ? (v) => v : gsap.utils.snap(config.snap || 1),
        totalWidth,
        curX,
        distanceToStart,
        distanceToLoop,
        item,
        i;

      gsap.set(items, {
        xPercent: (i, el) => {
          let w = (widths[i] = parseFloat(gsap.getProperty(el, "width", "px")));
          xPercents[i] = snap(
            (parseFloat(gsap.getProperty(el, "x", "px")) / w) * 100 +
              gsap.getProperty(el, "xPercent")
          );
          return xPercents[i];
        },
      });

      gsap.set(items, { x: 0 });
      totalWidth =
        items[length - 1].offsetLeft +
        (xPercents[length - 1] / 100) * widths[length - 1] -
        startX +
        items[length - 1].offsetWidth * gsap.getProperty(items[length - 1], "scaleX") +
        (parseFloat(config.paddingRight) || 0);

      for (i = 0; i < length; i++) {
        item = items[i];
        curX = (xPercents[i] / 100) * widths[i];
        distanceToStart = item.offsetLeft + curX - startX;
        distanceToLoop = distanceToStart + widths[i] * gsap.getProperty(item, "scaleX");
        tl.to(
          item,
          {
            xPercent: snap(((curX - distanceToLoop) / widths[i]) * 100),
            duration: distanceToLoop / pixelsPerSecond,
          },
          0
        )
          .fromTo(
            item,
            { xPercent: snap(((curX - distanceToLoop + totalWidth) / widths[i]) * 100) },
            {
              xPercent: xPercents[i],
              duration: (curX - distanceToLoop + totalWidth - curX) / pixelsPerSecond,
              immediateRender: false,
            },
            distanceToLoop / pixelsPerSecond
          )
          .add("label" + i, distanceToStart / pixelsPerSecond);
        times[i] = distanceToStart / pixelsPerSecond;
      }

      function toIndex(index, vars) {
        vars = vars || {};
        Math.abs(index - curIndex) > length / 2 && (index += index > curIndex ? -length : length);
        let newIndex = gsap.utils.wrap(0, length, index),
          time = times[newIndex];
        if (time > tl.time() !== index > curIndex) {
          vars.modifiers = { time: gsap.utils.wrap(0, tl.duration()) };
          time += tl.duration() * (index > curIndex ? 1 : -1);
        }
        curIndex = newIndex;
        vars.overwrite = true;
        return tl.tweenTo(time, vars);
      }

      tl.next = (vars) => toIndex(curIndex + 1, vars);
      tl.previous = (vars) => toIndex(curIndex - 1, vars);
      tl.current = () => curIndex;
      tl.toIndex = (index, vars) => toIndex(index, vars);
      tl.times = times;

      if (config.reversed) {
        tl.vars.onReverseComplete();
        tl.reverse();
      }
      return tl;
    }

    //---------------------------------

    gsap.to(".section6 > div #line", {
      scrollTrigger: {
        trigger: ".section6 > div:first-child",
        start: "40% bottom",
        end: "40% top",
        scrub: 4,
      },
      width: "15vmin",
    });
  </script>
</html>
