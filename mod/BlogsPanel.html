<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <meta
      name="robots"
      content="noindex, nofollow"
    />
    <meta
      name="googlebot"
      content="noindex,indexifembedded"
    />
    <title>ادمین - لیست مقالات</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/CSSRulePlugin.min.js"></script>
    <script src="../src/js/ScrollSmoother.min.js"></script>
    <script src="../src/js/SplitText.min.js"></script>

    <link
      rel="stylesheet"
      href="../src/blogs/index.css?v=1.0.12"
    />
    <link
      rel="stylesheet"
      href="../src/css/main.css"
    />

    <link
      href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
      rel="stylesheet"
    />
    <link
      href="
    https://cdn.jsdelivr.net/npm/quill-image-uploader@1.3.0/dist/quill.imageUploader.min.css
    "
      rel="stylesheet"
    />

    <script src="https://unpkg.com/jalali-moment/dist/jalali-moment.browser.js"></script>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="
    https://cdn.jsdelivr.net/npm/quill-image-uploader@1.3.0/dist/quill.imageUploader.min.js
    "></script>

    <style>
      body {
        overflow-x: hidden;
      }
      .heroHolder {
        overflow-x: hidden;
      }
      .heroHolder > h1 {
        font-family: rokh;
        text-align: center;
        margin: 80px 0 50px 0;
        position: relative;
        color: white;
      }
      .heroHolder > h1::before {
        content: "";
        position: absolute;
        top: -25%;
        right: -25%;
        left: -25%;
        bottom: -25%;
        transform: rotate(-2deg);
        background: #db4949;
        z-index: -1;
        transition: 0.2s ease;
      }
      #editor {
        height: 70vh;
        direction: ltr;
      }
      .editorContainer {
        direction: ltr;
        padding: 5%;
      }
      .ql-editor {
        direction: rtl;
        text-align: right;
      }
      textarea,
      input {
        background: transparent;
        padding: 8px;
        margin: 8px;
        width: 50vmin;
        border: 1px solid rgb(171, 171, 171);
        direction: rtl;
        font-family: Arial, YekanBakhFaNum, Helvetica, sans-serif;
      }
      textarea {
        resize: vertical;
      }

      #category {
        width: 50vmin;
      }
      select {
        background: rgb(8, 143, 158);
        border-radius: 4px;
        padding: 8px;
        margin: 8px 0;
        width: 50vmin;
        border: transparent;
        color: white;
        font-family: rokh;
        direction: rtl;
      }
      label {
        font-family: rokh;
      }
      .tag-container {
        display: flex;
        flex-wrap: wrap;
        margin: 8px;
        border: 1px solid rgb(171, 171, 171);
      }

      .tag {
        background-color: #0000000f;
        padding: 5px 10px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        margin: 5px;
      }

      .tag span {
        margin-right: 5px;
      }

      .tag .close-icon {
        cursor: pointer;
      }
      button {
        background: rgb(8, 143, 158);
        color: white;
        border: transparent;
        border-radius: 4px;
        padding: 8px 16px;
        margin: 10px 0;
        font-family: rokh;
        transition: all 0.2s ease;
      }
      button:hover {
        background: rgb(5, 85, 94);
      }
      button:active {
        scale: 0.9;
      }
      #logContainer {
        border: 1px solid rgb(171, 171, 171);
        padding: 5px;
      }

      .popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
        z-index: 999;
        font-family: rokh;
      }

      .popup-content {
        background: white;
        padding: 30px;
        border-radius: 5px;
        text-align: center;
      }

      .mainBlogContainer img {
        width: var(--custom-width, 100%);
      }

      .ql-snow .ql-picker-options .ql-picker-item {
        font-family: attr(data-value);
      }

      .ql-snow .ql-picker.ql-font .ql-picker-label::before,
      .ql-snow .ql-picker.ql-font .ql-picker-item::before {
        content: attr(data-value) !important;
      }
    </style>
  </head>
  <body>
    <div class="heroHolder">
      <h1>پنل مقالات</h1>
    </div>

    <section class="editorContainer">
      <input
        type="text"
        id="pageUrl"
        name="pageUrl"
      />
      <label for="pageUrl">آدرس صفحه</label>
      <br />
      <input
        type="text"
        id="title"
        name="title"
      />
      <label for="title">عنوان</label>
      <br />
      <input
        type="text"
        id="datePicker"
        name="date"
      />
      <label for="datePicker">تاریخ شمسی</label>
      <br />
      <input
        type="text"
        id="datePickerEnTranslate"
        name="date"
        disabled
      />
      <label for="datePickerEnTranslate">تاریخ میلادی</label>
      <br />
      <input
        type="text"
        id="datePickerEn"
        name="datePickerEn"
      />
      <label for="datePickerEn">تاریخ میلادی سئو</label>
      <br />

      <textarea
        id="description"
        name="Description"
        rows="5"
      ></textarea>
      <label for="Description">شرح خلاصه</label>
      <br />
      <input
        type="file"
        id="imageInput"
        name="imageInput"
      />
      <label for="imageInput">تصویر کاور</label>
      <img
        id="previewImage"
        src="#"
        style="max-width: 300px; max-height: 300px"
      />
      <br />
      <input
        type="text"
        id="tag-input"
        placeholder="Enter tags and press Enter"
      />
      <label for="tag-input">تگ</label>
      <div
        class="tag-container"
        id="tag-container"
      ></div>
      <br />
      <label for="category">دسته بندی</label>
      <br />
      <input
        type="text"
        id="category"
        name="category"
      />
      <select id="categorySelector">
        <option
          value=""
          selected
          disabled
        >
          انتخاب کنید
        </option>
      </select>

      <br />

      <input
        id="imgWidth"
        name="imgWidth"
        type="number"
        min="1"
        max="100"
        required
      />
      <label for="imgWidth">عرض تصویر</label>

      <div id="editor"></div>

      <div id="toolbar">
        <select id="blogSelect">
          <option
            value=""
            selected
            disabled
          >
            انتخاب کنید
          </option>
        </select>
        <label for="blogSelect">ویرایش مقالات</label>
        <br />
        <button id="preview">پیش نمایش</button>
        <button
          class="popUpFuc"
          id="submitForm"
          data-function="submitFormFunction"
        >
          ثبت
        </button>
        <button
          class="popUpFuc"
          id="deletePage"
          data-function="deleteBlogFunction"
        >
          حذف
        </button>
      </div>
      <div id="logContainer"></div>

      <div
        id="popup"
        class="popup"
      >
        <div class="popup-content">
          <p>آیا اطمینان دارید که می‌خواهید ادامه دهید؟</p>
          <button id="yesButton">بله</button>
          <button id="noButton">خیر</button>
        </div>
      </div>
    </section>
    <section class="hero">
      <h1 id="mainTitle"></h1>
    </section>
    <section class="section2">
      <header class="magnetic-wrap">
        <a
          class="mouseSticky"
          data-cursor="pointerClickable"
          >لیست مقالات</a
        >
        <a
          class="mouseSticky"
          data-cursor="pointerClickable"
          >صفحه‌ی اصلی</a
        >
        <a
          class="mouseSticky"
          data-cursor="pointerClickable"
          >کاتالوگ محصولات</a
        >
        <a
          class="mouseSticky"
          data-cursor="pointerClickable"
          >ارتباط با ما</a
        >
        <a
          class="mouseSticky"
          data-cursor="pointerClickable"
          >استرامیکس</a
        >
        <span>&nbsp;&nbsp;/&nbsp;&nbsp;</span>
        <a
          id="dateSelector"
          class="mouseSticky"
          data-cursor="pointerClickable"
        ></a>
      </header>
      <div class="mainBlogContainer"></div>
      <div class="blogTags"></div>
    </section>
    <section class="section3">
      <div class="cardsContainer">
        <div style="width: 33vw"></div>
        <div style="width: 33vw"></div>
        <div style="width: 33vw"></div>
        <div class="card">
          <a
            href=""
            data-cursor="pointerLinkNavbar"
          >
            <div>
              <p class="category"></p>
              <p class="time"></p>
            </div>
            <img
              class="img"
              src=""
            />
            <h6 class="title"></h6>
            <p class="description"></p>
          </a>
        </div>
      </div>
    </section>
    <script>
      const username = sessionStorage.getItem("username");
      const password = sessionStorage.getItem("password");

      document.addEventListener("DOMContentLoaded", function () {
        const formData = new FormData();
        formData.append("username", username);
        formData.append("password", password);

        fetch("login.php", {
          method: "POST",
          body: formData,
        })
          .then((response) => response.text())
          .then((text) => {
            if (text != "true") {
              document.body.innerHTML = "";

              document.body.innerHTML = '<a style="display: block; width: 100%; text-align: center; font-size: larger;" href="index.html">لاگین کنید</a>';
            }
          })
          .catch((error) => console.error("Error:", error));
      });

      let currentFunction = null;

      let buttons = document.querySelectorAll(".popUpFuc");

      buttons.forEach(function (button) {
        button.addEventListener("click", function () {
          document.getElementById("popup").style.display = "flex";
          currentFunction = window[button.getAttribute("data-function")];
        });
      });

      document.getElementById("yesButton").addEventListener("click", function () {
        if (currentFunction) {
          currentFunction();
        }
        document.getElementById("popup").style.display = "none";
      });

      document.getElementById("noButton").addEventListener("click", function () {
        document.getElementById("popup").style.display = "none";
      });
      window.addEventListener("click", function (event) {
        let popup = document.getElementById("popup");
        if (event.target == popup) {
          popup.style.display = "none";
        }
      });
      /* log box ----------------------*/
      const logContainer = document.getElementById("logContainer");

      function addLog(message, type) {
        const logElement = document.createElement("div");
        logElement.textContent = `[${type.toUpperCase()}] ${message}`;
        logContainer.appendChild(logElement);
        logContainer.scrollTop = logContainer.scrollHeight;
      }

      function formatArgs(args) {
        return args.map((arg) => (typeof arg === "object" ? JSON.stringify(arg, null, 2) : arg)).join(" ");
      }

      ["log", "error", "warn", "info"].forEach((type) => {
        const original = console[type];
        console[type] = function (...args) {
          addLog(formatArgs(args), type);
          original.apply(console, args);
        };
      });

      let tags = [];

      /*Select available blogs ------------------------------------*/
      document.addEventListener("DOMContentLoaded", function () {
        const blogSelect = document.getElementById("blogSelect");
        const blogDateInput = document.getElementById("datePicker");
        const datePickerEnTranslateInput = document.getElementById("datePickerEnTranslate");
        const blogDateEnInput = document.getElementById("datePickerEn");
        const blogTitleInput = document.getElementById("title");
        const blogDescriptionInput = document.getElementById("description");
        const blogImageInput = document.getElementById("previewImage");
        const blogTagsInput = document.getElementById("blogTags");
        const pageUrlInput = document.getElementById("pageUrl");
        const categoryInput = document.getElementById("category");
        const categorySelector = document.getElementById("categorySelector");

        let categories = [];

        function loadJSON(callback) {
          const xhr = new XMLHttpRequest();
          xhr.overrideMimeType("application/json");
          const url = new URL("../serverAssets/blogs.json", window.location.origin);
          url.searchParams.set("t", new Date().getTime());
          xhr.open("GET", url, true);
          xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
              callback(xhr.responseText);
            }
          };
          xhr.send(null);
        }

        function populateBlogTitles(data) {
          const jsonData = JSON.parse(data);
          const blogs = jsonData.blogs;

          blogs.forEach((blog, index) => {
            const option = document.createElement("option");
            option.textContent = blog.title;
            option.value = index;
            blogSelect.appendChild(option);

            if (!categories.includes(blog.category)) {
              categories.push(blog.category);
            }
          });
          categories.forEach((category) => {
            const option = document.createElement("option");
            option.textContent = category;
            option.value = category;
            categorySelector.appendChild(option);
          });
        }

        function displayBlogInfo(index) {
          const jsonData = JSON.parse(localStorage.getItem("blogs"));
          const blog = jsonData.blogs[index];

          blogDateInput.value = blog.date;
          datePickerEnTranslateInput.value = blog.dateConvert;
          blogDateEnInput.value = blog.dateEn;
          blogTitleInput.value = blog.title;
          blogDescriptionInput.value = blog.description;
          pageUrlInput.value = blog.url;
          categoryInput.value = blog.category;
          blogImageInput.src = "../serverAssets/blogsCoverImg/" + blog.image;

          const tagContainer = document.getElementById("tag-container");
          tagContainer.innerHTML = "";
          tags = [];
          blog.tags.forEach((tag) => {
            const tagElement = document.createElement("div");
            tagElement.className = "tag";
            tagElement.innerHTML = `
              <span>${tag}</span>
              <span class="close-icon">&#10005;</span>
          `;
            const closeIcon = tagElement.querySelector(".close-icon");
            closeIcon.addEventListener("click", function () {
              tagContainer.removeChild(tagElement);
            });
            tagContainer.appendChild(tagElement);
            tags.push(tag);
          });

          fetch(`https://strumix.com/blogs/${blog.url}`)
            .then((response) => response.text())
            .then((html) => {
              const parser = new DOMParser();
              const doc = parser.parseFromString(html, "text/html");
              const mainBlogContainer = doc.querySelector(".mainBlogContainer");
              const mainBlogContainerHTML = mainBlogContainer.innerHTML;
              quill.clipboard.dangerouslyPasteHTML(mainBlogContainerHTML);
            })
            .catch((error) => {
              console.error("Error fetching the content:", error);
            });
        }

        loadJSON(function (response) {
          localStorage.setItem("blogs", response);
          populateBlogTitles(response);
        });

        blogSelect.addEventListener("change", function () {
          const selectedIndex = blogSelect.value;
          displayBlogInfo(selectedIndex);
        });
        categorySelector.addEventListener("change", function () {
          const selectedCategory = categorySelector.value;
          categoryInput.value = selectedCategory;
        });
      });

      /*Quill ------------------------------------*/
      Quill.register("modules/imageUploader", ImageUploader);

      const FontAttributor = Quill.import("attributors/class/font");
      FontAttributor.whitelist = ["YekanBakh", "Rokh", "Doran"];
      Quill.register(FontAttributor, true);

      const SizeAttributor = Quill.import("attributors/class/size");
      SizeAttributor.whitelist = ["small", false];
      Quill.register(SizeAttributor, true);

      var quill = new Quill("#editor", {
        theme: "snow",
        modules: {
          toolbar: [
            [
              {
                font: ["YekanBakh", "Rokh", "Doran"],
              },
              { size: ["small", false] },
            ],
            [{ header: [1, 2, 3, false] }],
            ["link", "bold", "italic", "underline"],
            ["image"],
            [{ list: "ordered" }, { list: "bullet" }],
            [{ color: [] }, { background: [] }],
            [{ align: [] }],
          ],
          imageUploader: {
            upload: (file) => {
              return new Promise((resolve, reject) => {
                const formData = new FormData();
                formData.append("image", file);
                formData.append("username", username);
                formData.append("password", password);

                fetch("./uploadBlogsImages.php", {
                  method: "POST",
                  body: formData,
                })
                  .then((response) => response.json())
                  .then((result) => {
                    if (result.imageUrl) {
                      resolve(result.imageUrl);
                    } else {
                      reject(result.error || "Upload failed");
                    }
                  })
                  .catch((error) => {
                    reject("Upload failed");
                    console.error("Error:", error);
                  });
              });
            },
          },
        },
      });

      /*preview ------------------------------------*/

      document.getElementById("preview").addEventListener("click", function () {
        const datePickerValue = document.getElementById("datePicker").value;
        const titleValue = document.getElementById("title").value;
        const descriptionValue = document.getElementById("description").value;
        const categoryValue = document.getElementById("category").value;

        const previewImage = document.getElementById("previewImage").src;
        document.querySelector(".card .img").src = previewImage;

        const imgWidthInput = document.getElementById("imgWidth").value || "100";

        const imagesContainer = document.querySelector(".mainBlogContainer");
        imagesContainer.style.setProperty("--custom-width", imgWidthInput + "%");

        var html = quill.root.innerHTML;
        document.querySelector(".mainBlogContainer").innerHTML = html;

        document.getElementById("mainTitle").innerHTML = titleValue;
        document.getElementById("dateSelector").innerHTML = datePickerValue;

        document.querySelector(".card .time").innerHTML = datePickerValue;
        document.querySelector(".card .category").innerHTML = categoryValue;
        document.querySelector(".card .title").innerHTML = titleValue;
        document.querySelector(".card .description").innerHTML = descriptionValue;
        let blogTagsDiv = document.querySelector(".blogTags");
        blogTagsDiv.innerHTML = "";
        tags.forEach((tag) => {
          let tagElement = document.createElement("a");
          tagElement.setAttribute("data-cursor", "pointerClickable");
          tagElement.textContent = "#" + tag;

          let spanElement = document.createElement("span");
          spanElement.innerHTML = "&nbsp;&nbsp;/&nbsp;&nbsp;";

          blogTagsDiv.appendChild(tagElement);

          blogTagsDiv.appendChild(spanElement);
        });
      });

      /*  تاریخ--------------*/

      function convertToPersianWords(number) {
        const persianWords = ["۰", "۱", "۲", "۳", "۴", "۵", "۶", "۷", "۸", "۹"];
        return number.toString().replace(/\d/g, (d) => persianWords[d]);
      }

      const input = document.getElementById("datePicker");

      input.addEventListener("input", function () {
        let currentValue = this.value;
        let persianValue = convertToPersianWords(currentValue);
        this.value = persianValue;
      });

      function getTodayJalaliDate() {
        const months = ["فروردین", "اردیبهشت", "خرداد", "تیر", "مرداد", "شهریور", "مهر", "آبان", "آذر", "دی", "بهمن", "اسفند"];

        const jDate = moment().locale("fa").format("jYYYY/jMM/jDD");
        const [jYear, jMonth, jDay] = jDate.split("/");

        const persianDay = convertToPersianWords(parseInt(jDay));
        const persianMonth = months[parseInt(jMonth) - 1];
        const persianYear = convertToPersianWords(jYear);

        return `${persianDay}${persianMonth}${persianYear}`;
      }

      document.getElementById("dateSelector").innerHTML = getTodayJalaliDate();
      document.getElementById("datePicker").value = getTodayJalaliDate();
      convertDate();

      function getTodayDate() {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, "0");
        const day = String(today.getDate()).padStart(2, "0");

        return `${year}-${month}-${day}`;
      }

      document.getElementById("datePickerEn").value = getTodayDate();

      /*tags ------------------------------------*/
      document.addEventListener("DOMContentLoaded", function () {
        const tagInput = document.getElementById("tag-input");
        const tagContainer = document.getElementById("tag-container");

        function createTagElement(tagName) {
          const tag = document.createElement("div");
          tag.className = "tag";
          tag.innerHTML = `
              <span>${tagName}</span>
              <span class="close-icon">&#10005;</span>
          `;
          const closeIcon = tag.querySelector(".close-icon");
          closeIcon.addEventListener("click", function () {
            tags = tags.filter((tagValue) => tagValue !== tagName);
            tagContainer.removeChild(tag);
          });
          return tag;
        }

        tagInput.addEventListener("keydown", function (event) {
          if (event.key === "Enter" && tagInput.value.trim() !== "") {
            const tagName = tagInput.value.trim();
            if (!tags.includes(tagName)) {
              tags.push(tagName);
              const tagElement = createTagElement(tagName);
              tagContainer.appendChild(tagElement);
              tagInput.value = "";
            }
          }
        });
      });

      /* ساخت صفحه جدید------------------------*/
      async function submitFormFunction() {
        function sanitizeUrl(url) {
          url = url.trim();
          url = url.replace(/[^A-Za-z0-9\-ا-ی]/g, "-");
          url = url.replace(/-+/g, "-");
          return url;
        }

        function showError(message) {
          console.error(message);
          alert("اطلاعات به درستی ثبت نشد لطفا دوباره تلاش کنید");
        }

        const datePickerValue = document.getElementById("datePicker").value;
        const datePickerEnTranslateValue = document.getElementById("datePickerEnTranslate").value;
        const datePickerEnValue = document.getElementById("datePickerEn").value;
        const titleValue = document.getElementById("title").value;
        const descriptionValue = document.getElementById("description").value;
        const pageUrlInput = document.getElementById("pageUrl").value;
        const sanitizedUrl = sanitizeUrl(pageUrlInput);
        const categoryInput = document.getElementById("category").value;
        const imgWidthInput = document.getElementById("imgWidth").value;
        const previewImageSrc = document.getElementById("previewImage").src;

        const response = await fetch(previewImageSrc);
        const blob = await response.blob();

        const CoverImgFile = new File([blob], "image.jpg", { type: blob.type });

        if (sanitizedUrl === "index") {
          showError("You can't use index for url, that's main page");
          return;
        }

        const formDataCoverImg = new FormData();
        formDataCoverImg.append("image", CoverImgFile);
        formDataCoverImg.append("title", sanitizedUrl);
        formDataCoverImg.append("username", username);
        formDataCoverImg.append("password", password);

        let coverImageUploaded = false;
        let jsonUploaded = false;

        try {
          const coverImgResponse = await fetch("uploadBlogsCover.php", {
            method: "POST",
            body: formDataCoverImg,
          });
          const coverImgText = await coverImgResponse.text();
          if (coverImgText.includes("Image uploaded successfully!")) {
            console.log("Image uploaded successfully!");
            coverImageUploaded = true;
          } else {
            throw new Error(`Upload response: ${coverImgText}`);
          }
        } catch (error) {
          showError(error.message);
          return;
        }

        const CoverImage = sanitizedUrl + ".jpg";

        const data = {
          url: sanitizedUrl,
          category: categoryInput,
          title: titleValue,
          date: datePickerValue,
          dateConvert: datePickerEnTranslateValue,
          dateEn: datePickerEnValue,
          description: descriptionValue,
          image: CoverImage,
          tags: tags,
          imgWidth: imgWidthInput,
          username: username,
          password: password,
        };

        try {
          const jsonResponse = await fetch("uploadBlogJson.php", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });
          const jsonResult = await jsonResponse.json();
          if (jsonResult.success) {
            console.log("JSON data saved successfully!");
            jsonUploaded = true;
          } else {
            throw new Error("Failed to save blog.");
          }
        } catch (error) {
          showError(error.message);
          return;
        }

        if (coverImageUploaded && jsonUploaded) {
          var content = quill.root.innerHTML;
          const formData = new FormData();
          formData.append("url", sanitizedUrl);
          formData.append("title", titleValue);
          formData.append("description", descriptionValue);
          formData.append("date", datePickerValue);
          formData.append("dateConvert", datePickerEnTranslateValue);
          formData.append("dateEn", datePickerEnValue);
          formData.append("content", content);
          formData.append("tags", tags);
          formData.append("imgWidth", imgWidthInput);
          formData.append("username", username);
          formData.append("password", password);

          try {
            const newBlogsResponse = await fetch("uploadNewBlogs.php", {
              method: "POST",
              body: formData,
            });
            const newBlogsText = await newBlogsResponse.text();
            if (newBlogsText.includes("صفحه جدید با موفقیت ایجاد شد:")) {
              const logElement = document.createElement("div");
              logElement.innerHTML = newBlogsText;
              logContainer.appendChild(logElement);
              console.log("Page created successfully!");
            } else {
              throw new Error(newBlogsText);
            }
          } catch (error) {
            showError(error.message);
          }
        }
      }

      /* Delete blog ---------------------*/

      function deleteBlogFunction() {
        const pageUrlInput = document.getElementById("pageUrl").value;

        const formData = new FormData();
        formData.append("url", pageUrlInput);
        formData.append("username", username);
        formData.append("password", password);

        fetch("deleteBlogs.php", {
          method: "POST",
          body: formData,
        })
          .then((response) => response.text())
          .then((text) => {
            console.log(text);
          })
          .catch((error) => console.error("Error:", error));
      }

      /*imageInput display-------------------*/

      document.addEventListener("DOMContentLoaded", function () {
        const imageInput = document.getElementById("imageInput");
        const previewImage = document.getElementById("previewImage");

        imageInput.addEventListener("change", function () {
          const file = this.files[0];

          if (file) {
            const reader = new FileReader();

            reader.onload = function (e) {
              previewImage.src = e.target.result;
            };

            reader.readAsDataURL(file);
          } else {
            previewImage.src = "#";
          }
        });
      });

      /*limit width input-------------------*/
      document.getElementById("imgWidth").addEventListener("input", function () {
        const input = this;
        const value = parseInt(input.value);

        if (value < 1) {
          input.value = 1;
        } else if (value > 100) {
          input.value = 100;
        }
      });

      /*------------------------------------*/

      function convertPersianNumbersToEnglish(text) {
        const persianToEnglishMap = {
          "۰": "0",
          "۱": "1",
          "۲": "2",
          "۳": "3",
          "۴": "4",
          "۵": "5",
          "۶": "6",
          "۷": "7",
          "۸": "8",
          "۹": "9",
        };
        return text.replace(/[۰-۹]/g, (match) => persianToEnglishMap[match]);
      }

      function parsePersianDate(input) {
        const monthMapping = {
          فروردین: 1,
          اردیبهشت: 2,
          خرداد: 3,
          تیر: 4,
          مرداد: 5,
          شهریور: 6,
          مهر: 7,
          آبان: 8,
          آذر: 9,
          دی: 10,
          بهمن: 11,
          اسفند: 12,
        };

        const regex = /(\d{1,2})(فروردین|اردیبهشت|خرداد|تیر|مرداد|شهریور|مهر|آبان|آذر|دی|بهمن|اسفند)(\d{4})/;
        const match = input.match(regex);

        if (!match) return null;

        const day = match[1].padStart(2, "0");
        const month = monthMapping[match[2]];
        const year = match[3];

        return `${year}/${month}/${day}`;
      }

      function convertDate() {
        const input = document.getElementById("datePicker").value;

        const inputWithEnglishNumbers = convertPersianNumbersToEnglish(input);

        const persianDate = parsePersianDate(inputWithEnglishNumbers);

        if (!persianDate) {
          document.getElementById("datePickerEnTranslate").value = "تاریخ شمسی به درستی وارد نشده";
          return;
        }

        const gregorianDate = moment(persianDate, "jYYYY/jMM/jDD").format("YYYY-MM-DD");

        document.getElementById("datePickerEnTranslate").value = gregorianDate;
      }
      document.getElementById("datePicker").addEventListener("input", function () {
        convertDate();
      });
    </script>
  </body>
</html>
